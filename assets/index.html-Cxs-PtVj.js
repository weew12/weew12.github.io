import{_ as i,c as a,a as e,o as t}from"./app-BO2U5m27.js";const r="/assets/Tabby_58DXiL3qZR-BkOF3Yqf.png",h="/assets/chrome_7qt6xtV2uY-CFqE8OOd.png",n="/assets/chrome_5NfGQUpPRV-DhwfygJw.png",p={};function k(l,s){return t(),a("div",null,[...s[0]||(s[0]=[e(`<h2 id="拉取registry镜像" tabindex="-1"><a class="header-anchor" href="#拉取registry镜像"><span>拉取registry镜像</span></a></h2><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> registry</span></span></code></pre></div><h2 id="自签名证书生成-todo-完善" tabindex="-1"><a class="header-anchor" href="#自签名证书生成-todo-完善"><span>自签名证书生成（todo 完善）</span></a></h2><p>参考：<a href="https://vuepress.mirror.docker-practice.com/repository/registry_auth/#" target="_blank" rel="noopener noreferrer">https://vuepress.mirror.docker-practice.com/repository/registry_auth/#</a></p><h2 id="启动registry容器-设置好后面需要适配docker-registry-ui-的环境变量" tabindex="-1"><a class="header-anchor" href="#启动registry容器-设置好后面需要适配docker-registry-ui-的环境变量"><span>启动registry容器（设置好后面需要适配docker-registry-ui 的环境变量）</span></a></h2><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">  --name</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> registry</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">  -v</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /data/docker.registry/etc/cert.d:/etc/cert.d</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">  -v</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /data/docker.registry/var/lib/registry:/var/lib/registry</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">  -p</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> 5000:5000</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">  --restart</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> always</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> REGISTRY_HTTP_TLS_KEY=/etc/cert.d/registry.key</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> REGISTRY_HTTP_TLS_CERTIFICATE=/etc/cert.d/registry.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> REGISTRY_HTTP_HEADERS_Access-Control-Allow-Origin=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">[http://172.16.2.106:9001]</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> REGISTRY_HTTP_HEADERS_Access-Control-Allow-Methods=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">[HEAD,GET,OPTIONS,DELETE]</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> REGISTRY_HTTP_HEADERS_Access-Control-Allow-Credentials=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">[true]</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> REGISTRY_HTTP_HEADERS_Access-Control-Allow-Headers=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">[Authorization,Accept,Cache-Control]</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> REGISTRY_HTTP_HEADERS_Access-Control-Expose-Headers=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">[Docker-Content-Digest]</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> REGISTRY_STORAGE_DELETE_ENABLED=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">true</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">  docker.io/registry</span></span></code></pre></div><h2 id="配置docker-registry-ui" tabindex="-1"><a class="header-anchor" href="#配置docker-registry-ui"><span>配置docker-registry-ui</span></a></h2><p><a href="https://github.com/Joxit/docker-registry-ui?tab=readme-ov-file#recommended-docker-registry-usage" target="_blank" rel="noopener noreferrer">官方相关配置</a></p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> registry-ui</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> 9001:80</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> REGISTRY_URL=https://172.16.2.106:5000</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> REGISTRY_TITLE=WEEW12REGISTRY</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> docker.io/joxit/docker-registry-ui:master</span></span></code></pre></div><p><img src="`+r+'" alt=""></p><h2 id="访问页面" tabindex="-1"><a class="header-anchor" href="#访问页面"><span>访问页面</span></a></h2><p><a href="http://ip:9001" target="_blank" rel="noopener noreferrer">http://ip:9001</a></p><p><img src="'+h+'" alt=""></p><p>推送镜像后再查看：</p><p><img src="'+n+'" alt=""></p>',15)])])}const o=i(p,[["render",k]]),d=JSON.parse('{"path":"/article/t0jkgozg/","title":"docker私有仓库registry搭建","lang":"zh-CN","frontmatter":{"title":"docker私有仓库registry搭建","createTime":"2025/09/15 22:34:02","permalink":"/article/t0jkgozg/","tags":["docker","registry"],"cover":"/2.工具或软件/covers/docker.png","coverStyle":{"layout":"left","compact":false,"width":75},"description":"拉取registry镜像 自签名证书生成（todo 完善） 参考：https://vuepress.mirror.docker-practice.com/repository/registry_auth/# 启动registry容器（设置好后面需要适配docker-registry-ui 的环境变量） 配置docker-registry-ui 官方相关...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"docker私有仓库registry搭建\\",\\"image\\":[\\"https://weew12.github.io/2.工具或软件/covers/docker.png\\"],\\"dateModified\\":\\"2026-01-01T13:45:51.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://weew12.github.io/article/t0jkgozg/"}],["meta",{"property":"og:site_name","content":"WEEW12 BLOG"}],["meta",{"property":"og:title","content":"docker私有仓库registry搭建"}],["meta",{"property":"og:description","content":"拉取registry镜像 自签名证书生成（todo 完善） 参考：https://vuepress.mirror.docker-practice.com/repository/registry_auth/# 启动registry容器（设置好后面需要适配docker-registry-ui 的环境变量） 配置docker-registry-ui 官方相关..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://weew12.github.io/2.工具或软件/covers/docker.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-01-01T13:45:51.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://weew12.github.io/2.工具或软件/covers/docker.png"}],["meta",{"name":"twitter:image:alt","content":"docker私有仓库registry搭建"}],["meta",{"property":"article:tag","content":"registry"}],["meta",{"property":"article:tag","content":"docker"}],["meta",{"property":"article:modified_time","content":"2026-01-01T13:45:51.000Z"}]]},"readingTime":{"minutes":0.71,"words":213},"git":{"createdTime":1757948288000,"updatedTime":1767275151000,"contributors":[{"name":"weew12","username":"weew12","email":"2528566339@qq.com","commits":3,"avatar":"https://avatars.githubusercontent.com/weew12?v=4","url":"https://github.com/weew12"}]},"autoDesc":true,"filePathRelative":"2.工具或软件/03.docker私有仓库registry搭建.md","headers":[],"categoryList":[{"id":"d5932f","sort":2,"name":"工具或软件"}]}');export{o as comp,d as data};
