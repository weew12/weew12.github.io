<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.24" /><meta name="theme" content="VuePress Theme Plume " /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"16 网络编程","image":["https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404402580-8e9ddae1-b609-4ffe-a282-705d980fddbe.png","https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404405470-f3e17e69-ce22-4028-941e-a6f2a9942527.png","https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404410931-473c638b-b9ec-4ae0-a487-6f526a135387.png","https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404413948-c32e74b0-de07-4d8f-a917-4ce25ffba9de.png","https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404418574-84d55861-c4c5-43b9-821c-7ee86d4f8b58.png","https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404421804-1d03284f-f705-4cfc-92ee-a5b383115844.png","https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404428428-bb5aad21-d377-4f85-90cf-c7658cb95c8d.png","https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404432958-e1bb47b2-1f4c-46cd-81c1-bb866b4767a8.png","https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404439886-3d54e51c-028c-4d2a-9cf7-379cf3fdaf8a.png","https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404445087-ca6639bb-5fec-4f15-9221-3330b6192b84.png","https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404449492-21629554-a286-49e4-a0d7-b38a9a68c8bd.png","https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404454353-4fc06bcd-9592-441c-9ea5-78948c452040.png","https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404460258-e3ef9a18-6101-4607-9994-e5193a2118e6.png","https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404463789-684f562e-58f1-4351-8772-539689645651.png","https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404470574-a3551daf-2c73-428c-8bb2-5b43c33ca9fe.png","https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404477454-03a0fede-0a0b-41d2-8d5e-1df438444095.png","https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404485630-6a421b6e-0b4c-461d-8558-68c1cfaa8b08.png","https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404496121-7ec89190-e7a7-4f83-b651-3659031cfee7.png"],"dateModified":"2025-08-27T15:07:12.000Z","author":[]}</script><meta property="og:url" content="https://weew12.github.io/language/java/wqc0nsk7/"><meta property="og:site_name" content="WEEW12 BLOG"><meta property="og:title" content="16 网络编程"><meta property="og:description" content="网络编程概述 Java是Internet上的语言，它从语言级上提供了对网络应用程序的支持，程序员能够很容易开发常见的网络应用程序。Java提供的网络类库，可以实现无痛的网络连接，联网的底层细节被隐藏在Java的本机安装系统里，由JVM进行控制，并且Java实现了一个跨平台的网络库，程序员面对的是一个统一的网络编程环境。 软件架构 C/S架构：全称为Cl..."><meta property="og:type" content="article"><meta property="og:image" content="https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404402580-8e9ddae1-b609-4ffe-a282-705d980fddbe.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-08-27T15:07:12.000Z"><meta property="article:modified_time" content="2025-08-27T15:07:12.000Z"><link rel="icon" type="image/png" href="/favicon.ico"><meta name="referrer" content="no-referrer"><title>16 网络编程 | WEEW12 BLOG</title><meta name="description" content="网络编程概述 Java是Internet上的语言，它从语言级上提供了对网络应用程序的支持，程序员能够很容易开发常见的网络应用程序。Java提供的网络类库，可以实现无痛的网络连接，联网的底层细节被隐藏在Java的本机安装系统里，由JVM进行控制，并且Java实现了一个跨平台的网络库，程序员面对的是一个统一的网络编程环境。 软件架构 C/S架构：全称为Cl..."><link rel="preload" href="/assets/style-VKnRds0j.css" as="style"><link rel="stylesheet" href="/assets/style-VKnRds0j.css"><link rel="modulepreload" href="/assets/app-BO2U5m27.js"><link rel="modulepreload" href="/assets/index.html-D6xNNQ6L.js"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-27c095d7><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-f5342612></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-f5342612> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-27c095d7 data-v-ae750b7e><div class="vp-navbar" vp-navbar data-v-ae750b7e data-v-3002d082><div class="wrapper" data-v-3002d082><div class="container" data-v-3002d082><div class="title" data-v-3002d082><div class="vp-navbar-title has-sidebar" data-v-3002d082 data-v-666dade2><a class="vp-link link no-icon title" href="/" data-v-666dade2><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" style="" src="/logo.png" alt data-v-bc1f2c6d><!--]--><!--[--><img class="vp-image light logo" style="" src="/logo.png" alt data-v-bc1f2c6d><!--]--><!--]--><!--]--><span data-v-666dade2>WEEW12 BLOG</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-3002d082><div class="content-body" data-v-3002d082><!--[--><!--]--><div class="vp-navbar-search search" data-v-3002d082><div class="search-wrapper" data-v-97535d1e><!----><div id="local-search" data-v-97535d1e><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-97535d1e><span class="mini-search-button-container"><span class="mini-search-search-icon vpi-mini-search" aria-label="search icon"></span><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><!--[--><!--]--><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-3002d082 data-v-de5fb40d><span id="main-nav-aria-label" class="visually-hidden" data-v-de5fb40d>Main Navigation</span><!--[--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/" tabindex="0" data-v-de5fb40d data-v-bc304da9><!--[--><!----><span data-v-bc304da9>博客</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/tags/" tabindex="0" data-v-de5fb40d data-v-bc304da9><!--[--><!----><span data-v-bc304da9>标签</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/categories/" tabindex="0" data-v-de5fb40d data-v-bc304da9><!--[--><!----><span data-v-bc304da9>分类</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/archives/" tabindex="0" data-v-de5fb40d data-v-bc304da9><!--[--><!----><span data-v-bc304da9>归档</span><!----><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-de5fb40d data-v-4393febb><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-4393febb><span class="text" data-v-4393febb><!----><!----><span data-v-4393febb>笔记</span><!----><span class="vpi-chevron-down text-icon" data-v-4393febb></span></span></button><div class="menu" data-v-4393febb><div class="vp-menu" data-v-4393febb data-v-471c6636><div class="items" data-v-471c6636><!--[--><!--[--><div class="vp-menu-group" data-v-471c6636 data-v-1ee9ef5f><p class="title" data-v-1ee9ef5f><!----><span data-v-1ee9ef5f>后端</span></p><!--[--><!--[--><div class="vp-menu-link" data-v-1ee9ef5f data-v-04daa31f><a class="vp-link link" href="/language/java/1pj4wq5u/" data-v-04daa31f><!--[--><!----> 语言基础 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-1ee9ef5f data-v-04daa31f><a class="vp-link link" href="/framework/heima_ssm_book/r3rcs5o0/" data-v-04daa31f><!--[--><!----> 框架相关 <span class="vp-badge tip vp-menu-badge" style="" data-v-04daa31f data-v-26900783><!--[-->new<!--]--></span><!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="vp-menu-group" data-v-471c6636 data-v-1ee9ef5f><p class="title" data-v-1ee9ef5f><!----><span data-v-1ee9ef5f>数据库</span></p><!--[--><!--[--><div class="vp-menu-link" data-v-1ee9ef5f data-v-04daa31f><a class="vp-link link" href="/mysql/q449w0j5/" data-v-04daa31f><!--[--><!----> MYSQL <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!--[--><!--]--><!----><div class="vp-navbar-appearance appearance" data-v-3002d082 data-v-07ea9724><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-07ea9724 data-v-4b98d79f data-v-51d980cd><span class="check" data-v-51d980cd><span class="icon" data-v-51d980cd><!--[--><span class="vpi-sun sun" data-v-4b98d79f></span><span class="vpi-moon moon" data-v-4b98d79f></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-3002d082 data-v-99a107d5 data-v-3ad50ecc><!--[--><a class="vp-social-link no-icon" href="https://github.com/weew12" aria-label="github" target="_blank" rel="noopener" data-v-3ad50ecc data-v-959e34fc><span class="vpi-social-github" /></a><a class="vp-social-link no-icon" href="mailto:2528566339@qq.com" aria-label="qq" target="_blank" rel="noopener" data-v-3ad50ecc data-v-959e34fc><span class="vpi-social-qq" /></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-3002d082 data-v-d8b05a8e data-v-4393febb><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-4393febb><span class="vpi-more-horizontal icon" data-v-4393febb></span></button><div class="menu" data-v-4393febb><div class="vp-menu" data-v-4393febb data-v-471c6636><!----><!--[--><!--[--><!----><div class="group" data-v-d8b05a8e><div class="item appearance" data-v-d8b05a8e><p class="label" data-v-d8b05a8e>外观</p><div class="appearance-action" data-v-d8b05a8e><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-d8b05a8e data-v-4b98d79f data-v-51d980cd><span class="check" data-v-51d980cd><span class="icon" data-v-51d980cd><!--[--><span class="vpi-sun sun" data-v-4b98d79f></span><span class="vpi-moon moon" data-v-4b98d79f></span><!--]--></span></span></button></div></div></div><div class="group" data-v-d8b05a8e><div class="item social-links" data-v-d8b05a8e><div class="vp-social-links social-links-list" data-v-d8b05a8e data-v-3ad50ecc><!--[--><a class="vp-social-link no-icon" href="https://github.com/weew12" aria-label="github" target="_blank" rel="noopener" data-v-3ad50ecc data-v-959e34fc><span class="vpi-social-github" /></a><a class="vp-social-link no-icon" href="mailto:2528566339@qq.com" aria-label="qq" target="_blank" rel="noopener" data-v-3ad50ecc data-v-959e34fc><span class="vpi-social-qq" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-3002d082 data-v-e5558799><span class="container" data-v-e5558799><span class="top" data-v-e5558799></span><span class="middle" data-v-e5558799></span><span class="bottom" data-v-e5558799></span></span></button></div></div></div></div><div class="divider" data-v-3002d082><div class="divider-line" data-v-3002d082></div></div></div><!----></header><div class="vp-local-nav reached-top" data-v-27c095d7 data-v-b0433a68><button class="menu" aria-expanded="false" aria-controls="SidebarNav" data-v-b0433a68><span class="vpi-align-left menu-icon" data-v-b0433a68></span><span class="menu-text" data-v-b0433a68>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-b0433a68 data-v-358fac30><button data-v-358fac30>返回顶部</button><!----></div></div><aside class="vp-sidebar" vp-sidebar data-v-27c095d7 data-v-fd62cea1><div class="curtain" data-v-fd62cea1></div><nav id="SidebarNav" class="nav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-fd62cea1><span id="sidebar-aria-label" class="visually-hidden" data-v-fd62cea1> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-e274f709><section class="vp-sidebar-item sidebar-item level-0 collapsible has-active" data-v-e274f709 data-v-994e26d4><div class="item" role="button" tabindex="0" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><h2 class="text" data-v-994e26d4><span data-v-994e26d4>Java语言基础</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-994e26d4><span class="vpi-chevron-right caret-icon" data-v-994e26d4></span></div></div><div data-v-994e26d4 data-v-994e26d4><div class="items" data-v-994e26d4><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/gofne3j6/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>0 内容来源</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/1pj4wq5u/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>1 Java 语言基础</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/k3nmchta/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>2 变量与运算符</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/s2woyft5/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>3 流程控制语句</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/zwkzypc5/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>4 IDEA的安装与使用</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/r6rvf6kx/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>5 数组</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/aml0zxx3/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>6 面向对象编程（基础）</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/fkirt3by/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>7 面向对象编程（进阶）</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/9vg2o834/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>8 面向对象编程（高级）</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/trz4w8wh/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>9 异常处理</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/x7n888dm/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>10 多线程</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/weqlsenw/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>11 常用类和基础 API</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/fqqt45mw/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>12 集合框架</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/zwfxpbpd/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>13 数据结构与集合源码</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/4u2og2wz/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>14 泛型(Generic)</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/xbz1gklc/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>15 File类与IO流</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/wqc0nsk7/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>16 网络编程</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/engvia7u/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>17 反射机制</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/ztxsqetm/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>18 JDK8_17新特性</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><div class="no-transition group" data-v-e274f709><section class="vp-sidebar-item sidebar-item level-0 collapsible collapsed" data-v-e274f709 data-v-994e26d4><div class="item" role="button" tabindex="0" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><h2 class="text" data-v-994e26d4><span data-v-994e26d4>Java集合专栏</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-994e26d4><span class="vpi-chevron-right caret-icon" data-v-994e26d4></span></div></div><div style="display:none;" data-v-994e26d4 data-v-994e26d4><div class="items" data-v-994e26d4><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/nb9o1y1d/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>01_Java集合框架体系结构与核心接口原理</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/qok33b3d/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>02_List接口规范与实现类深度分析</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/9dkr7vtb/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>03_Set接口规范与实现类深度分析</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/c1hjqmcc/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>04_Map接口规范与实现类深度分析</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/1jxugnzo/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>05_Queue与Deque接口规范与实现类深度分析</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/xevgd32q/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>06_迭代器设计模式与Spliterator机制原理</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/t574v1jn/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>07_Java集合工具类API原理与应用实践</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/dbwmlw7k/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>08_Java并发集合框架设计原理与实现机制</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/dk9cxyez/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>09_Java集合框架核心知识点与典型面试题解析</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/worogkiq/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>10_Java 8+函数式特性与集合框架集成原理</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/amdfdlox/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>11_Java集合框架学习体系与进阶指南</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><!--]--><!--[--><!--]--></nav></aside><!--[--><div id="VPContent" vp-content class="vp-content has-sidebar" data-v-27c095d7 data-v-5b39a01b><div class="vp-doc-container has-sidebar has-aside" data-v-5b39a01b data-v-0d7da0a5><!--[--><!--]--><div class="container" data-v-0d7da0a5><div class="aside" vp-outline data-v-0d7da0a5><div class="aside-curtain" data-v-0d7da0a5></div><div class="aside-container" data-v-0d7da0a5><div class="aside-content" data-v-0d7da0a5><div class="vp-doc-aside" data-v-0d7da0a5 data-v-6df97c7f><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="vp-doc-aside-outline" role="navigation" data-v-6df97c7f data-v-3003aeb2><div class="content" data-v-3003aeb2><div class="outline-marker" data-v-3003aeb2></div><div id="doc-outline-aria-label" aria-level="2" class="outline-title" role="heading" data-v-3003aeb2><span data-v-3003aeb2>目录</span><span class="vpi-print icon" data-v-3003aeb2></span></div><ul class="root" data-v-3003aeb2 data-v-f4c16ca0><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-6df97c7f></div><!--[--><!--]--></div></div></div></div><div class="content" data-v-0d7da0a5><div class="content-container" data-v-0d7da0a5><!--[--><!--]--><main class="main" data-v-0d7da0a5><nav class="vp-breadcrumb" data-v-0d7da0a5 data-v-eeb0b690><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-eeb0b690><!--[--><li property="itemListElement" typeof="ListItem" data-v-eeb0b690><a class="vp-link link breadcrumb" href="/" property="item" typeof="WebPage" data-v-eeb0b690><!--[-->首页<!--]--><!----></a><span class="vpi-chevron-right" data-v-eeb0b690></span><meta property="name" content="首页" data-v-eeb0b690><meta property="position" content="1" data-v-eeb0b690></li><li property="itemListElement" typeof="ListItem" data-v-eeb0b690><span class="vp-link breadcrumb" property="item" typeof="WebPage" data-v-eeb0b690><!--[-->Java语言基础<!--]--><!----></span><span class="vpi-chevron-right" data-v-eeb0b690></span><meta property="name" content="Java语言基础" data-v-eeb0b690><meta property="position" content="2" data-v-eeb0b690></li><li property="itemListElement" typeof="ListItem" data-v-eeb0b690><a class="vp-link link breadcrumb current" href="/language/java/wqc0nsk7/" property="item" typeof="WebPage" data-v-eeb0b690><!--[-->16 网络编程<!--]--><!----></a><!----><meta property="name" content="16 网络编程" data-v-eeb0b690><meta property="position" content="3" data-v-eeb0b690></li><!--]--></ol></nav><!--[--><!--]--><!--[--><h1 class="vp-doc-title page-title" data-v-e9ba3c81><!----> 16 网络编程 <!----></h1><div class="vp-doc-meta" data-v-e9ba3c81><!--[--><!--]--><p class="reading-time" data-v-e9ba3c81><span class="vpi-books icon" data-v-e9ba3c81></span><span data-v-e9ba3c81>约 12026 字</span><span data-v-e9ba3c81>大约 40 分钟</span></p><!----><!--[--><!--]--><p class="create-time" data-v-e9ba3c81><span class="vpi-clock icon" data-v-e9ba3c81></span><span data-v-e9ba3c81>2025-08-22</span></p></div><!--]--><!--[--><!--]--><div class="_language_java_wqc0nsk7_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-0d7da0a5><!--[--><!--]--><div data-v-0d7da0a5><h2 id="网络编程概述" tabindex="-1"><a class="header-anchor" href="#网络编程概述"><span>网络编程概述</span></a></h2><p><code>Java</code>是<code>Internet</code>上的语言，<strong>它从语言级上提供了对网络应用程序的支持</strong>，程序员能够很容易开发常见的网络应用程序。<code>Java</code>提供的网络类库，可以实现无痛的网络连接，联网的底层细节被隐藏在<code>Java</code>的本机安装系统里，由<code>JVM</code>进行控制，并且<code>Java</code><strong>实现了一个跨平台的网络库，程序员面对的是一个统一的网络编程环境</strong>。</p><h3 id="软件架构" tabindex="-1"><a class="header-anchor" href="#软件架构"><span>软件架构</span></a></h3><ul><li><code>C/S</code><strong>架构</strong>：全称为<code>Client/Server</code>结构，<strong>是指客户端和服务器结构</strong>。常见程序有<code>QQ</code>、美团、<code>360</code>等软件</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404402580-8e9ddae1-b609-4ffe-a282-705d980fddbe.png" alt=""></p><ul><li><code>B/S</code><strong>架构</strong>：全称为<code>Browser/Server</code>结构，<strong>是指浏览器和服务器结构</strong>。常见浏览器有<code>IE</code>、谷歌、火狐等</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404405470-f3e17e69-ce22-4028-941e-a6f2a9942527.png" alt=""></p><p>两种架构各有优势，但是无论哪种架构，都离不开网络的支持。<strong><!----></strong></p><h3 id="网络基础" tabindex="-1"><a class="header-anchor" href="#网络基础"><span>网络基础</span></a></h3><ul><li><strong>计算机网络</strong>：把分布在不同地理区域的计算机与专门的外部设备用通信线路互连成一个规模大、功能强的网络系统，从而使众多的计算机可以方便地互相传递信息、共享硬件、软件、数据信息等资源</li><li><strong>网络编程的目的</strong>：直接或间接地通过网络协议与其它计算机实现数据交换，进行通讯</li><li>网络编程中有三个主要的问题： <ul><li><strong>问题</strong><code>1</code>：如何准确地<strong>定位网络上一台或多台主机？</strong> <code>IP</code></li><li><strong>问题</strong><code>2</code>：如何<strong>定位主机上的特定的应用？</strong> <!----><strong><!----></strong></li><li><strong>问题</strong><code>3</code>：找到主机后，如何<strong>可靠、高效地进行数据传输？</strong> <strong><!----></strong></li></ul></li></ul><h2 id="网络通信要素" tabindex="-1"><a class="header-anchor" href="#网络通信要素"><span>网络通信要素</span></a></h2><h3 id="如何实现网络中的主机互相通信" tabindex="-1"><a class="header-anchor" href="#如何实现网络中的主机互相通信"><span>如何实现网络中的主机互相通信</span></a></h3><ul><li><strong><!----></strong><ul><li><code>IP</code></li><li><strong>端口号</strong></li></ul></li><li><strong><!----></strong>：不同的硬件、操作系统之间的通信，所有的这一切都需要一种规则，<strong>这种规则称为协议，即：网络通信协议</strong></li></ul><p><strong>生活类比：</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404410931-473c638b-b9ec-4ae0-a487-6f526a135387.png" alt=""></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404413948-c32e74b0-de07-4d8f-a917-4ce25ffba9de.png" alt=""></p><h3 id="通信要素1-ip地址和域名" tabindex="-1"><a class="header-anchor" href="#通信要素1-ip地址和域名"><span>通信要素<code>1</code>：<code>IP</code>地址和域名</span></a></h3><h4 id="ip地址" tabindex="-1"><a class="header-anchor" href="#ip地址"><span><code>IP</code>地址</span></a></h4><p><code>IP</code><strong>地址：指互联网协议地址（Internet Protocol Address）</strong>，俗称<code>IP</code>，<code>IP</code>地址用来给网络中的一台计算机设备做唯一的编号。假如把“个人电脑”比作“电话”，那“<code>IP</code>地址”就相当于“电话号码”</p><h5 id="ip地址分类方式1" tabindex="-1"><a class="header-anchor" href="#ip地址分类方式1"><span><code>IP</code>地址分类方式<code>1</code></span></a></h5><ul><li><p><code>IPv4</code>：是一个<code>32</code>位的二进制数，通常被分为<code>4</code>个字节，表示成<code>a.b.c.d</code>的形式，以<!---->表示，其中<code>a、b、c、d</code>都是<code>0~255</code>之间的十进制整数。<strong>例如</strong>：<code>192.168.65.100</code></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404418574-84d55861-c4c5-43b9-821c-7ee86d4f8b58.png" alt=""></p><ul><li><p>这种方式最多可以表示<code>42亿</code>个。其中<code>30亿</code>都在北美，亚洲<code>4亿</code>，中国<code>2.9亿</code>，<code>2011</code>年初<!----></p></li><li><p><code>IP</code><strong>地址 = 网络地址 +主机地址</strong></p><ul><li><strong><!----></strong>：标识计算机或网络设备所在的网段</li><li><strong><!----></strong>：标识特定主机或网络设备</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404421804-1d03284f-f705-4cfc-92ee-a5b383115844.png" alt=""></p><ul><li>其中，<code>E</code>类用于科研</li></ul></li></ul></li><li><p><code>IPv6</code>：由于互联网的蓬勃发展，<code>IP</code>地址的需求量愈来愈大，但是网络地址资源有限，使得<code>IP</code>的分配越发紧张</p><ul><li><strong>为了扩大地址空间，拟通过</strong><code>IPv6</code><strong>重新定义地址空间，采用</strong><code>128</code><strong>位地址长度，共</strong><code>16</code><strong>个字节，写成</strong><code>8</code><strong>个无符号整数，每个整数用</strong><code>4</code><strong>个十六进制位表示，数之间用冒号</strong><code>:</code><strong>分开</strong><ul><li><strong>比如</strong>：<code>ABCD:EF01:2345:6789:ABCD:EF01:2345:6789</code>，按保守方法估算<code>IPv6</code>实际可分配的地址，整个地球的每平方米面积上仍可分配<code>1000</code>多个地址，这样就解决了网络地址资源数量不够的问题。<code>2012</code>年<code>6</code>月<code>6</code>日，国际互联网协会举行了世界<code>IPv6</code>启动纪念日，这一天，全球<code>IPv6</code>网络正式启动，多家知名网站，如：<code>Google</code>、<code>Facebook</code>和<code>Yahoo</code>等，于当天全球标准时间<code>0</code>点（北京时间<code>8</code>点整）开始永久性支持<code>IPv6</code>访问。<code>2018</code>年<code>6</code>月，三大运营商联合阿里云宣布，将全面对外提供<code>IPv6</code>服务，并计划在<code>2025</code>年前助推中国互联网真正实现<code>IPv6 Only</code></li></ul></li><li>在<code>IPv6</code>的设计过程中除了一劳永逸地解决了地址短缺问题以外，还考虑了在<code>IPv4</code>中解决不好的其它问题，主要有端到端<code>IP</code>连接、服务质量<code>QoS</code>、安全性、多播、移动性、即插即用等</li></ul></li></ul><h5 id="ip地址分类方式2" tabindex="-1"><a class="header-anchor" href="#ip地址分类方式2"><span><code>IP</code>地址分类方式<code>2</code></span></a></h5><p><strong>公网地址(万维网使用)和私有地址(局域网使用)</strong></p><p><code>192.168</code>开头的就是私有地址，范围即为<code>192.168.0.0~192.168.255.255</code>，专门为组织机构内部使用</p><p><strong>常用命令：</strong></p><ul><li>查看本机<code>IP</code>地址，在控制台输入：</li></ul><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">ipconfig</span></span></code></pre></div><ul><li>检查网络是否连通，在控制台输入：</li></ul><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">ping</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> 空格</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> IP地址</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">ping</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 220.181.57.216</span></span></code></pre></div><p><strong>特殊的</strong><code>IP</code><strong>地址：</strong></p><ul><li>本地回环地址(<code>hostAddress</code>)：<code>127.0.0.1</code></li><li>主机名(<code>hostName</code>)：<code>localhost</code></li></ul><h4 id="域名" tabindex="-1"><a class="header-anchor" href="#域名"><span>域名</span></a></h4><p><code>Internet</code>上的主机有两种方式表示地址：</p><ul><li>域名(<code>hostName</code>)：<code>[www.atguigu.com](http://www.atguigu.com)</code></li><li><code>IP</code>地址(<code>hostAddress</code>)：<code>202.108.35.210</code></li></ul><p><strong>域名解析：</strong> 因为<code>IP</code>地址数字不便于记忆，因此出现了域名。域名容易记忆，当在连接网络时输入一个主机的域名后，域名服务器(<code>DNS</code>：<code>Domain Name System</code>，域名系统)负责将域名转化成<code>IP</code>地址，这样才能和主机建立连接。</p><p><strong>简单理解：</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404428428-bb5aad21-d377-4f85-90cf-c7658cb95c8d.png" alt=""></p><p><strong>详细理解：</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404432958-e1bb47b2-1f4c-46cd-81c1-bb866b4767a8.png" alt=""></p><ul><li><code>1.</code>在浏览器中输入<code>www.qq.com</code>域名，操作系统会先检查自己本地的<code>hosts</code>文件是否有这个网址映射关系，如果有，就先调用这个<code>IP</code>地址映射，完成域名解析</li><li><code>2.</code>如果<code>hosts</code>里没有这个域名的映射，则查找本地<code>DNS</code>解析器缓存，是否有这个网址映射关系，如果有，直接返回，完成域名解析</li><li><code>3.</code><strong>如果</strong><code>hosts</code><strong>与本地</strong><code>DNS</code><strong>解析器缓存都没有相应的网址映射关系，首先会找</strong><code>TCP/IP</code><strong>参数中设置的首选</strong><code>DNS</code><strong>服务器，在此我们叫它本地</strong><code>DNS</code><strong>服务器，此服务器收到查询时，如果要查询的域名，包含在本地配置区域资源中，则返回解析结果给客户机，完成域名解析，此解析具有权威性</strong></li><li><code>4.</code><strong>如果要查询的域名，不由本地</strong><code>DNS</code><strong>服务器区域解析，但该服务器已缓存了此网址映射关系，则调用这个</strong><code>IP</code><strong>地址映射，完成域名解析，此解析不具有权威性</strong></li><li><code>5.</code>如果本地<code>DNS</code>服务器本地区域文件与缓存解析都失效，则根据本地<code>DNS</code>服务器的设置（是否设置转发器）进行查询，<strong>如果未用转发模式</strong>，本地<code>DNS</code>就把请求发至<code>13</code>台根<code>DNS</code>，根<code>DNS</code>服务器收到请求后会判断这个域名(<code>.com</code>)是谁来授权管理，返回一个负责该顶级域名服务器的一个<code>IP</code>。本地<code>DNS</code>服务器收到<code>IP</code>信息后，将会联系负责<code>.com</code>域的这台服务器。这台负责<code>.com</code>域的服务器收到请求后，如果自己无法解析，它就会找一个管理<code>.com</code>域的下一级<code>DNS</code>服务器地址(<code>http://qq.com</code>)给本地<code>DNS</code>服务器。当本地<code>DNS</code>服务器收到这个地址后，就会找(<code>http://qq.com</code>)域服务器，重复上面的动作，进行查询，直至找到<code>www.qq.com</code>主机</li><li><code>6.</code><strong>如果用的是转发模式</strong>，此<code>DNS</code>服务器就会把请求转发至上一级<code>DNS</code>服务器，由上一级服务器进行解析，上一级服务器如果不能解析，或找根<code>DNS</code>或把请求转至上上级，以此循环。不管是本地<code>DNS</code>服务器用是是转发，还是根提示，最后都是把结果返回给本地<code>DNS</code>服务器，由此<code>DNS</code>服务器再返回给客户机</li></ul><h3 id="通信要素2-端口号" tabindex="-1"><a class="header-anchor" href="#通信要素2-端口号"><span>通信要素<code>2</code>：端口号</span></a></h3><p><strong>网络的通信，本质上是两个进程（应用程序）的通信。</strong> 每台计算机都有很多的进程，那么在网络通信时，如何区分这些进程呢？</p><ul><li>如果说<strong>IP地址</strong>可以唯一标识网络中的设备，那么<strong>端口号就可以唯一标识设备中的进程（应用程序）</strong></li><li><strong>不同的进程，设置不同的端口号</strong></li><li><strong>端口号：用两个字节表示的整数，它的取值范围是</strong><code>0~65535</code><ul><li><strong>公认端口：</strong><code>0~1023</code><strong>，预先定义的服务通信占用，如：</strong><code>HTTP</code> <code>80</code><strong>、</strong><code>FTP</code> <code>21</code><strong>、</strong><code>Telnet</code> <code>23</code></li><li><strong>注册端口：</strong><code>1024~49151</code><strong>，分配给用户进程或应用程序</strong>，<strong>如</strong>：<code>Tomcat</code> <code>8080</code>、<code>MySQL</code> <code>3306</code>、<code>Oracle</code> <code>1521</code></li><li><strong>动态/私有端口：</strong><code>49152~65535</code></li></ul></li><li>如果端口号被另外一个服务或应用所占用，会导致当前程序启动失败</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404439886-3d54e51c-028c-4d2a-9cf7-379cf3fdaf8a.png" alt=""></p><h3 id="通信要素3-网络通信协议" tabindex="-1"><a class="header-anchor" href="#通信要素3-网络通信协议"><span>通信要素<code>3</code>：网络通信协议</span></a></h3><p>通过计算机网络可以使多台计算机实现连接，<strong>位于同一个网络中的计算机在进行连接和通信时需要遵守一定的规则，这就好比在道路中行驶的汽车一定要遵守交通规则一样</strong></p><ul><li><strong>网络通信协议</strong>：在计算机网络中，这些连接和通信的规则被称为网络通信协议，它对数据的传输格式、传输速率、传输步骤、出错控制等做了统一规定，通信双方必须同时遵守才能完成数据交换</li></ul><p><strong>问题：</strong><!----></p><p>计算机网络通信涉及内容很多，比如指定源地址和目标地址、加密解密、压缩解压缩、差错控制、流量控制、路由控制，如何实现如此复杂的网络协议呢？<strong>通信协议分层思想。</strong></p><p>在制定协议时，把复杂成份分解成一些简单的成份，再将它们复合起来。<strong>最常用的复合方式是层次方式，即：同层间可以通信、上一层可以调用下一层，而与再下一层不发生关系，各层互不影响，利于系统的开发和扩展。</strong></p><p><strong><!----></strong></p><ul><li><code>OSI</code><strong>参考模型</strong>：模型过于理想化，未能在因特网上进行广泛推广</li><li><code>TCP/IP</code><strong>参考模型(</strong><code>TCP/IP</code><strong>协议)：事实上的国际标准</strong></li></ul><p><img src="https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404445087-ca6639bb-5fec-4f15-9221-3330b6192b84.png" alt=""></p><p><code>TCP/IP</code><strong><!----></strong></p><p><code>TCP/IP</code><strong><!----><strong>传输控制协议/因特网互联协议(</strong><code>Transmission Control Protocol/Internet Protocol</code></strong>)，<strong><code>TCP/IP</code><strong>以其两个主要协议：传输控制协议(</strong><code>TCP</code></strong>)和网络互联协议(<strong><code>IP</code></strong>)而得名，<strong><!----></strong>，是 <strong><code>Internet</code></strong> 最基本、最广泛的协议。</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404449492-21629554-a286-49e4-a0d7-b38a9a68c8bd.png" alt=""></p><p><code>TCP/IP</code><strong>协议中的四层介绍：</strong></p><ul><li><strong><!----></strong>：<strong><!----></strong>。<strong>主要协议有</strong>：<code>HTTP</code>协议、<code>FTP</code>协议、<code>SNMP</code>(简单网络管理协议)、<code>SMTP</code>(简单邮件传输协议)和<code>POP3</code>(<code>Post Office Protocol 3</code>，邮局协议的第3 个版本)等</li><li><strong><!----></strong>：<strong><!----></strong><code>TCP</code><strong><!----></strong><code>UDP</code><strong><!----></strong><!----><code>TCP</code><strong>(</strong><code>Transmission Control Protocol</code><strong>)协议，即：传输控制协议，是一种面向连接的、可靠的、基于字节流的传输层通信协议</strong>；<code>UDP</code><strong>(</strong><code>User Datagram Protocol</code><strong>)协议，即：用户数据报协议，是一个无连接的传输层协议、提供面向事务的简单不可靠的信息传送服务</strong></li><li><strong><!----></strong>：<strong><!----></strong><code>TCP/IP</code><strong><!----></strong>。主要用于将传输的数据进行分组，将分组数据发送到目标计算机或者网络。<strong><code>IP</code></strong>(<strong><code>Internet Protocal</code></strong>)协议是一种非常重要的协议，又称为互联网协议。<strong><code>IP</code></strong> 的责任就是把数据从源传送到目的地，它在源地址和目的地址之间传送一种称之为数据包的东西，它还提供对数据大小的重新组装功能，以适应不同网络对包大小的要求</li><li><strong><!----></strong>：<strong><!----></strong>，例如：针对光纤、网线提供的驱动</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404454353-4fc06bcd-9592-441c-9ea5-78948c452040.png" alt=""></p><h2 id="传输层协议-tcp与udp协议" tabindex="-1"><a class="header-anchor" href="#传输层协议-tcp与udp协议"><span>传输层协议：<code>TCP</code>与<code>UDP</code>协议</span></a></h2><p>通信的协议是比较复杂的，<code>java.net</code>包中包含的类和接口，它们提供低层次的通信细节，我们可以直接使用这些类和接口来专注于网络程序开发，而不用考虑通信的细节。</p><p><code>java.net</code>包中提供了两种常见的网络协议的支持：</p><ul><li><code>UDP</code>：用户数据报协议(<code>User Datagram Protocol</code>)</li><li><code>TCP</code>：传输控制协议(<code>Transmission Control Protocol</code>)</li></ul><h3 id="tcp协议与udp协议" tabindex="-1"><a class="header-anchor" href="#tcp协议与udp协议"><span><code>TCP</code>协议与<code>UDP</code>协议</span></a></h3><p><code>TCP</code><strong>协议</strong></p><ul><li><code>TCP</code>协议进行通信的两个应用进程：<strong>客户端</strong>、<strong>服务端</strong><ul><li><strong>使用</strong><code>TCP</code><strong>协议前，须先建立</strong><code>TCP</code><strong>连接，形成基于字节流的传输数据通道</strong></li></ul></li><li><strong>传输前，采用“三次握手”方式，点对点通信，是可靠的</strong><ul><li><code>TCP</code>协议使用<strong>重发机制</strong>，当一个通信实体发送一个消息给另一个通信实体后，需要收到另一个通信实体确认信息，如果没有收到另一个通信实体确认信息，则会再次重复刚才发送的消息</li></ul></li><li>在连接中可进行大数据量的传输</li><li>传输完毕，<strong>需释放已建立的连接，效率低</strong></li></ul><p><strong>UDP协议</strong></p><ul><li><code>UDP</code>协议进行通信的两个应用进程：<strong>发送端</strong>、<strong>接收端</strong><ul><li><strong>将数据、源、目的封装成数据报（传输的基本单位），不需要建立连接</strong></li><li><strong>发送不管对方是否准备好，接收方收到也不确认，不能保证数据的完整性，故是不可靠的</strong></li><li><strong>每个数据报的大小限制在</strong><code>64K</code><strong>内</strong></li><li><strong>发送数据结束时无需释放资源，开销小，通信效率高</strong></li></ul></li><li><strong>适用场景</strong>：音频、视频和普通数据的传输。<strong>例如</strong>：视频会议</li></ul><p><code>TCP</code>生活案例：打电话</p><p><code>UDP</code>生活案例：发送短信、发电报</p><h3 id="三次握手" tabindex="-1"><a class="header-anchor" href="#三次握手"><span>三次握手</span></a></h3><p><code>TCP</code>协议中，在发送数据的准备阶段，客户端与服务器之间的三次交互，以保证连接的可靠</p><ul><li>第一次握手：客户端向服务器端发起<code>TCP</code><strong>连接的请求</strong></li><li>第二次握手：服务器端发送<strong>针对客户端</strong><code>TCP</code><strong>连接请求的确认</strong></li><li>第三次握手：客户端发送<strong>确认的确认</strong></li></ul><p><img src="https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404460258-e3ef9a18-6101-4607-9994-e5193a2118e6.png" alt=""></p><ul><li><strong>详细过程：</strong><ul><li><code>1.</code>客户端会<strong>随机一个初始序列号</strong><code>seq=x</code><strong>，设置</strong><code>SYN=1</code><strong>，表示这是</strong><code>SYN</code><strong>握手报文。<strong>然后把这个<code>SYN</code>报文发送给服务端，表示向服务端发起连接，之后</strong><!----></strong></li><li><code>2.</code>服务端收到客户端的<code>SYN</code>报文后，也<strong>随机一个初始序列号</strong><code>seq=y</code><strong>，设置</strong><code>ack=x+1</code><strong>，表示收到客户端的</strong><code>x</code><strong>之前的数据，希望客户端下次发送数据从</strong><code>x+1</code><strong>开始，<strong>设置<code>SYN=1</code>和<code>ACK=1</code>，表示这是一个<code>SYN</code>握手和<code>ACK</code>确认应答报文，最后把该报文发给客户端，该报文也不包含应用层数据，之后</strong><!----></strong></li><li><code>3.</code>客户端收到服务端报文后，还要<strong>向服务端回应最后一个应答报文，将</strong><code>ACK</code><strong>置为</strong><code>1</code><strong>，表示这是一个应答报文</strong><code>ack=y+1</code><strong>，表示收到了服务器的</strong><code>y</code><strong>之前的数据，希望服务器下次发送的数据从</strong><code>y+1</code>开始，最后把报文发送给服务端，这次报文可以携带数据，之后 <strong><!----></strong></li><li><code>4.</code>完成三次握手，连接建立后，客户端和服务器就可以开始进行数据传输了。由于<strong>这种面向连接的特性，</strong><code>TCP</code><strong>协议可以保证传输数据的安全，</strong> 所以应用十分广泛，<strong>例如</strong>：下载文件、浏览网页等</li></ul></li></ul><h3 id="四次挥手" tabindex="-1"><a class="header-anchor" href="#四次挥手"><span>四次挥手</span></a></h3><p><code>TCP</code>协议中，<strong>在发送数据结束后，释放连接时需要经过四次挥手</strong></p><ul><li>第一次挥手：<strong>客户端向服务器端提出结束连接，让服务器做最后的准备工作。此时，</strong><!----><strong>，即表示不再向服务器发送数据了，但是还可以接受数据</strong></li><li>第二次挥手：<strong>服务器接收到客户端释放连接的请求后，会将最后的数据发给客户端，并</strong><!----></li><li>第三次挥手：<strong><!----></strong>，会给客户端发送一个释放连接的报文，<strong><!----></strong></li><li>第四次挥手：<strong>客户端接收到服务器最后的释放连接报文后，</strong><!----><strong>。客户端发送完最后的报文后，会等待</strong><code>2MSL</code><strong>，因为有可能服务器没有收到最后的报文，那么服务器迟迟没收到，就会再次给客户端发送释放连接的报文，此时客户端在等待时间范围内接收到，会重新发送最后的报文，并重新计时。如果等待</strong><code>2MSL</code><strong>后，没有收到，那么彻底断开</strong></li></ul><p><img src="https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404463789-684f562e-58f1-4351-8772-539689645651.png" alt=""></p><ul><li><strong>详细过程：</strong><ul><li><code>1.</code>客户端打算断开连接，向服务器发送<code>FIN</code>报文(<code>FIN</code>标记位被设置为<code>1</code>，<code>1</code>表示为<code>FIN</code>，<code>0</code>表示不是)，<code>FIN</code>报文中会指定一个序列号，之后 <strong><!----></strong><code>FINWAIT1</code><strong><!----></strong>。也就是客户端发出连接释放报文段(<code>FIN</code>报文)，指定序列号<code>seq = u</code>，主动关闭<code>TCP</code>连接，等待服务器确认</li><li><code>2.</code>服务器收到连接释放报文段(<code>FIN</code>报文)后，就向客户端发送<code>ACK</code>应答报文，以客户端的<code>FIN</code>报文的序列号<code>seq+1</code>作为<code>ACK</code>应答报文段的确认序列号<code>ack = seq+1 = u + 1</code>。接着 <strong><!----></strong><code>CLOSEWAIT</code><strong><!----></strong>，此时的<code>TCP</code>处于半关闭状态，客户端到服务器的连接释放，<strong><!----></strong><code>ACK</code><strong><!----></strong><code>FINWAIT_2</code><strong><!----></strong></li><li><code>3.</code>服务器也打算断开连接，向客户端发送连接释放(<code>FIN</code>)报文段，之后<strong>服务器进入<code>LASK_ACK</code></strong><!---->，等待客户端的确认。服务器的连接释放(<code>FIN</code>)报文段的<code>FIN=1</code>、<code>ACK=1</code>，序列号<code>seq=m</code>，确认序列号<code>ack=u+1</code></li><li><code>4.</code>客户端收到来自服务器的连接释放(<code>FIN</code>)报文段后，会向服务器发送一个<code>ACK</code>应答报文段，以连接释放(<code>FIN</code>)报文段的确认序号<code>ack</code>作为<code>ACK</code>应答报文段的序列号<code>seq</code>，以连接释放(<code>FIN</code>)报文段的序列号<code>seq+1</code>作为确认序号<code>ack</code></li><li><code>5.</code>之后 <strong><!----></strong><code>TIMEWAIT</code><strong><!----></strong>，服务器收到 <strong><code>ACK</code><strong>应答报文段后，服务器就进入</strong><code>CLOSE</code></strong>(关闭)状态， 到此服务器的连接已经完成关闭。客户端处于<code>TIMEWAIT</code>状态时，此时的<code>TCP</code>还未释放掉，需要等待<code>2MSL</code>后，客户端才进入<code>CLOSE</code>状态</li></ul></li></ul><h2 id="网络编程api" tabindex="-1"><a class="header-anchor" href="#网络编程api"><span>网络编程<code>API</code></span></a></h2><h3 id="inetaddress类" tabindex="-1"><a class="header-anchor" href="#inetaddress类"><span><code>InetAddress</code>类</span></a></h3><p><code>InetAddress</code><strong><!----></strong><code>IP</code><strong><!----></strong><code>Inet4Address</code> <code>Inet6Address</code></p><p><code>InetAddress</code>类没有提供公共的构造器，<strong><!----></strong><code>InetAddress</code><strong><!----></strong></p><ul><li><code>public static InetAddress getLocalHost()</code></li><li><code>public static InetAddress getByName(String host)</code></li><li><code>public static InetAddress getByAddress(byte[] addr)</code></li></ul><p><code>InetAddress</code>提供了如下几个<strong>常用的方法</strong></p><ul><li><code>public String getHostAddress()</code>：返回<code>IP</code>地址字符串（以文本表现形式）</li><li><code>public String getHostName()</code>：获取此<code>IP</code>地址的主机名</li><li><code>public boolean isReachable(int timeout)</code>：测试是否可以达到该地址</li></ul><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">io</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Inet4Address</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">InetAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">UnknownHostException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> InetAddressTest</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> args</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> throws</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // getLocalHost()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        InetAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> localHost </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> Inet4Address</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getLocalHost</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">localHost</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // getByName(String host)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        InetAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> byName </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> Inet4Address</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getByName</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">www.baidu.com</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">byName</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // getByAddress(byte[] addr)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        InetAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> byAddress </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> Inet4Address</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getByAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">new</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> byte</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]{((</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">byte</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 183</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">),</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> ((</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">byte</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">),</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> ((</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">byte</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 172</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">),</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> ((</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">byte</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 42</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">byAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // getHostAddress()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        String</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> hostAddress </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> byName</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getHostAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">hostAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // getHostName()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        String</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> hostName </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> byName</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getHostName</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">hostName</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // isReachable(int timeout)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">        boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> reachable </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> byName</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">isReachable</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">reachable</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><p><img src="https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404470574-a3551daf-2c73-428c-8bb2-5b43c33ca9fe.png" alt=""></p><h3 id="socket类" tabindex="-1"><a class="header-anchor" href="#socket类"><span><code>Socket</code>类</span></a></h3><p><strong><!----></strong><code>IP</code><strong><!----></strong><code>Socket</code></p><ul><li>利用套接字<code>Socket</code>开发网络应用程序早已被广泛的采用，以至于成为事实上的标准。<strong>网络通信其实就是</strong><code>Socket</code><strong>间的通信</strong></li><li><strong>通信的两端都要有</strong><code>Socket</code><strong>，是两台机器间通信的端点</strong></li><li><code>Socket</code><strong>允许程序把网络连接当成一个流，数据在两个</strong><code>Socket</code><strong>间通过</strong><code>IO</code><strong>传输</strong></li><li><strong>一般主动发起通信的应用程序属</strong><!----><strong>，等待通信请求的为</strong><!----></li></ul><p><code>Socket</code><strong>分类：</strong></p><ul><li><strong><!----></strong><code>stream socket</code>：<strong>使用</strong><code>TCP</code><strong>提供可靠的字节流服务</strong><ul><li><code>ServerSocket</code>：<strong>实现</strong><code>TCP</code><strong>服务器套接字</strong>，服务器套接字等待请求通过网络传入</li><li><code>Socket</code>：<strong>实现客户端套接字</strong>，套接字是两台机器间通信的端点</li></ul></li><li><strong><!----></strong><code>datagram socket</code>：<strong>使用</strong><code>UDP</code><strong>提供尽力而为的数据报服务</strong><ul><li><code>DatagramSocket</code>：<strong>表示用来发送和接收</strong><code>UDP</code><strong>数据报的套接字</strong></li></ul></li></ul><h3 id="socket相关类api" tabindex="-1"><a class="header-anchor" href="#socket相关类api"><span><code>Socket</code>相关类<code>API</code></span></a></h3><h4 id="serversocket类" tabindex="-1"><a class="header-anchor" href="#serversocket类"><span><code>ServerSocket</code>类</span></a></h4><h5 id="构造方法" tabindex="-1"><a class="header-anchor" href="#构造方法"><span>构造方法</span></a></h5><ul><li><code>ServerSocket(int port)</code>：创建绑定到特定端口的服务器套接字</li></ul><h5 id="常用方法" tabindex="-1"><a class="header-anchor" href="#常用方法"><span>常用方法</span></a></h5><ul><li><code>Socket accept()</code>：侦听并接受到此套接字的连接</li></ul><h4 id="socket类-1" tabindex="-1"><a class="header-anchor" href="#socket类-1"><span><code>Socket</code>类</span></a></h4><h5 id="构造方法-1" tabindex="-1"><a class="header-anchor" href="#构造方法-1"><span>构造方法</span></a></h5><ul><li><code>public Socket(InetAddress address,int port)</code>：创建一个流套接字并将其连接到指定<code>IP</code>地址的指定端口号</li><li><code>public Socket(String host,int port)</code>：创建一个流套接字并将其连接到指定主机上的指定端口号</li></ul><h5 id="常用方法-1" tabindex="-1"><a class="header-anchor" href="#常用方法-1"><span>常用方法</span></a></h5><ul><li><code>public InputStream getInputStream()</code>：返回此套接字的输入流，可以用于<strong>接收消息</strong></li><li><code>public OutputStream getOutputStream()</code>：返回此套接字的输出流，可以用于<strong>发送消息</strong></li><li><code>public InetAddress getInetAddress()</code>：此套接字连接到的<strong>远程 IP 地址</strong>，如果套接字是未连接的，则返回<code>null</code></li><li><code>public InetAddress getLocalAddress()</code>：获取套接字<strong>绑定的本地地址</strong></li><li><code>public int getPort()</code>：此套接字连接到的<strong>远程端口号</strong>，如果<strong>尚未连接套接字，则返回</strong><code>0</code></li><li><code>public int getLocalPort()</code>：返回此套接字<strong>绑定到的本地端口</strong>，<strong>尚未绑定套接字，则返回</strong><code>-1</code></li><li><code>public void close()</code>：<strong>关闭此套接字</strong>。套接字被关闭后，便不可在以后的网络连接中使用，<strong>即</strong>：无法重新连接或重新绑定，需要创建新的套接字对象，关闭此套接字也将会关闭该套接字的<code>InputStream</code>和<code>OutputStream</code></li><li><code>public void shutdownInput()</code>：<strong>在套接字上调用</strong><code>shutdownInput()</code><strong>后从套接字输入流读取内容，则流将返回</strong><code>EOF</code><strong>文件结束符，即：不能再从此套接字的输入流中接收任何数据</strong></li><li><code>public void shutdownOutput()</code>：禁用此套接字的输出流。<strong>对于</strong><code>TCP</code><strong>套接字，任何以前写入的数据都将被发送，并且后跟</strong><code>TCP</code><strong>的正常连接终止序列。如果在套接字上调用</strong><code>shutdownOutput()</code><strong>后写入套接字输出流，则该流将抛出</strong><code>IOException</code><strong>，即：不能通过此套接字的输出流再发送任何数据</strong></li></ul><p><strong><!----></strong>：<strong>先后调用</strong><code>Socket</code><strong>的</strong><code>shutdownInput()</code><strong>和</strong><code>shutdownOutput()</code><strong>方法，仅仅关闭了输入流和输出流，并不等于调用</strong><code>Socket</code><strong>的</strong><code>close()</code><strong>方法。在通信结束后，仍然要调用</strong><code>Socket</code><strong>的</strong><code>close()</code><strong>方法，因为只有该方法才会释放</strong><code>Socket</code><strong>占用的资源，比如：占用的本地端口号等。</strong></p><h4 id="datagramsocket类" tabindex="-1"><a class="header-anchor" href="#datagramsocket类"><span><code>DatagramSocket</code>类</span></a></h4><h5 id="常用方法-2" tabindex="-1"><a class="header-anchor" href="#常用方法-2"><span>常用方法</span></a></h5><ul><li><code>public DatagramSocket(int port)</code>：<strong>创建数据报套接字并将其绑定到本地主机上的指定端口</strong>，套接字将被绑定到通配符地址，<code>IP</code>地址由内核来选择</li><li><code>public DatagramSocket(int port,InetAddress laddr)</code>：<strong>创建数据报套接字，将其绑定到指定的本地地址，<strong>本地端口必须在<code>0</code>到<code>65535</code>之间（包括两者），<strong>如果</strong><code>IP</code><strong>地址为</strong><code>0.0.0.0</code></strong>，套接字将被绑定到通配符地址，</strong><code>IP</code><strong>地址由内核选择</strong></li><li><code>public void close()</code>：关闭此数据报套接字</li><li><code>public void send(DatagramPacket p)</code>：从此套接字<strong>发送数据报包</strong>，<code>DatagramPacket</code>包含的信息：将要发送的数据、其长度、远程主机的<code>IP</code>地址和远程主机的端口号</li><li><code>public void receive(DatagramPacket p)</code>：从此套接字<strong>接收数据报包</strong>，当此方法返回时，<code>DatagramPacket</code>的缓冲区填充了接收的数据。数据报包也包含：发送方的<code>IP</code>地址和发送方机器上的端口号。<strong>此方法在接收到数据报前一直阻塞</strong>。数据报包对象的<code>length</code>字段包含所接收信息的长度，<!----></li><li><code>public InetAddress getLocalAddress()</code>：<strong>套接字绑定的本地地址</strong></li><li><code>public int getLocalPort()</code>：<strong>此套接字绑定的本地主机上的端口号</strong></li><li><code>public InetAddress getInetAddress()</code>：<strong>此套接字连接的地址，套接字未连接则返回</strong><code>null</code></li><li><code>public int getPort()</code>：<strong>此套接字的端口，套接字未连接则返回</strong><code>-1</code></li></ul><h4 id="datagrampacket类" tabindex="-1"><a class="header-anchor" href="#datagrampacket类"><span><code>DatagramPacket</code>类</span></a></h4><h5 id="常用方法-3" tabindex="-1"><a class="header-anchor" href="#常用方法-3"><span>常用方法</span></a></h5><ul><li><code>public DatagramPacket(byte[] buf,int length)</code>：<strong>构造</strong><code>DatagramPacket</code><strong>，用来接收长度为</strong><code>length</code><strong>的数据包，</strong><code>length</code><strong><!----></strong><code>buf.length</code></li><li><code>public DatagramPacket(byte[] buf,int length,InetAddress address,int port)</code>：<strong>构造数据报包，用来将长度为</strong><code>length</code><strong>的包发送到指定主机上的指定端口号，</strong><code>length</code><strong><!----></strong><code>buf.length</code></li><li><code>public InetAddress getAddress()</code>：<strong>返回某台机器的</strong><code>IP</code><strong>地址</strong>，此数据报将要发往该机器或者是从该机器接收到的</li><li><code>public int getPort()</code>：<strong>返回某台远程主机的端口号</strong>，此数据报将要发往该主机或者是从该主机接收到的</li><li><code>public byte[] getData()</code>：<strong>返回数据缓冲区，接收到的或将要发送的数据从缓冲区中的偏移量</strong><code>offset</code><strong>处开始，持续</strong><code>length</code><strong>长度</strong></li><li><code>public int getLength()</code>：<strong>返回将要发送或接收到的数据的长度</strong></li></ul><h2 id="tcp网络编程" tabindex="-1"><a class="header-anchor" href="#tcp网络编程"><span>TCP网络编程</span></a></h2><h3 id="通信模型" tabindex="-1"><a class="header-anchor" href="#通信模型"><span>通信模型</span></a></h3><p><code>Java</code>语言的基于套接字<code>TCP</code>编程分为：服务端编程和客户端编程，其通信模型如图所示：</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404477454-03a0fede-0a0b-41d2-8d5e-1df438444095.png" alt=""></p><h3 id="开发步骤" tabindex="-1"><a class="header-anchor" href="#开发步骤"><span>开发步骤</span></a></h3><p><strong><!----></strong></p><ul><li><code>1.</code><strong>创建</strong><code>Socket</code>：根据指定服务端的<code>IP</code>地址和端口号构造<code>Socket</code>类对象。若服务器端响应，则建立客户端到服务器的通信线路；若连接失败，会出现异常</li><li><code>2.</code><strong>打开连接到</strong><code>Socket</code><strong>的输入/ 出流</strong>：使用<code>getInputStream()</code>方法获得输入流，使用<code>getOutputStream()</code>方法获得输出流，进行数据传输</li><li><code>3.</code><strong>按照一定协议对</strong><code>Socket</code><strong>进行读/ 写操作</strong>：通过输入流读取服务器放入线路的信息，但不能读取自己放入线路的信息，通过输出流将信息写入线路</li><li><code>4.</code><strong>关闭</strong><code>Socket</code>：断开客户端到服务器的连接，释放线路</li></ul><p><strong><!----></strong></p><ul><li><code>1.</code><strong>调用</strong><code>ServerSocket(int port)</code>：创建一个服务器端套接字，并绑定到指定端口上，用于监听客户端的请求</li><li><code>2.</code><strong>调用</strong><code>accept()</code>：监听连接请求，如果客户端请求连接，则接受连接，返回通信套接字对象</li><li><code>3.</code><strong>调用该</strong><code>Socket</code><strong>类对象的</strong><code>getOutputStream()</code><strong>和</strong><code>getInputStream ()</code>：获取输出流和输入流，开始网络数据的发送和接收</li><li><code>4.</code><strong>关闭</strong><code>Socket</code><strong>对象</strong>：客户端访问结束，关闭通信套接字</li></ul><h3 id="练习" tabindex="-1"><a class="header-anchor" href="#练习"><span>练习</span></a></h3><ol><li>客户端发送内容给服务端，服务端将内容打印到控制台上</li><li>客户端发送文件给服务端，服务端将文件保存在本地</li><li>从客户端发送文件给服务端，服务端保存到本地。并返回“发送成功”给客户端。并关闭相应的连接</li><li>服务端读取图片并发送给客户端，客户端保存图片到本地</li><li>客户端给服务端发送文本，服务端会将文本转成大写在返回给客户端</li></ol><h3 id="案例-单个客户端与服务器通信" tabindex="-1"><a class="header-anchor" href="#案例-单个客户端与服务器通信"><span>案例：单个客户端与服务器通信</span></a></h3><blockquote><p>需求：客户端连接服务器，连接成功后给服务发送<code>lalala</code>，服务器收到后，给客户端返回<code>欢迎登录</code>，客户端接收消息后，断开连接</p></blockquote><ul><li><strong>服务器端代码</strong></li></ul><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">io</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">io</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">InputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">io</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">OutputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">InetAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">ServerSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> TCPCommunicateDemo1Server</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> args</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 1. 创建ServerSocket对象 绑定 8888 端口</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            ServerSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> serverSocket </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> ServerSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">8888</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">启动服务端，监听8888...</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 2. 监听端口连接请求</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> client </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> serverSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">accept</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            InetAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> clientInetAddress </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> client</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getInetAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">clientInetAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getHostAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">客户端连接成功...</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 3. 获取输入流 接受用户发来的数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            InputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> clientInputStream </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> client</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getInputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">            byte</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> buff </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> byte</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            StringBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> stringBuilder </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> StringBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">            int</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">            while</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> ((</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">len </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> clientInputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">read</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">buff</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">))</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> !=</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                stringBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">buff</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">clientInetAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getHostAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> stringBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 4. 获取输出流 发送数据给用户</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            OutputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> clientOutputStream </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> client</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getOutputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 发送数据到客户端</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            clientOutputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">欢迎登录</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            clientOutputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">flush</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 5. 关闭Socket 不再与客户端通信</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            client</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 6. 关闭ServerSocket 不再接受客户端的连接请求</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            serverSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> catch</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">IOException</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            e</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><ul><li><strong>客户端代码</strong></li></ul><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">io</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">InputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">io</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">OutputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> TCPCommunicateDemo1Client</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> args</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 1. 创建Socket对象 连接到指定服务器的IP和指定端口</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> socket </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">127.0.0.1</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">parseInt</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">8888</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 2. 获取输出流 发送数据给服务器</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            OutputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> socketOutputStream </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getOutputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 发送数据到服务端</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            socketOutputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">lalala</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 在输出流末尾加入结束标记 服务端读取到之后(-1) 不会再阻塞等待这边输入数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">shutdownOutput</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 3. 获取输入流 接受服务器发来的数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            InputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> socketInputStream </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getInputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">            byte</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> buff </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> byte</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            StringBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> stringBuilder </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> StringBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">            int</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">            while</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> ((</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">len </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> socketInputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">read</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">buff</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">))</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> !=</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                stringBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">buff</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">服务端消息：</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> stringBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 4. 关闭Socket 不再与服务器通信</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> catch</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Exception</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            e</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><h3 id="案例-多个客户端与服务器通信" tabindex="-1"><a class="header-anchor" href="#案例-多个客户端与服务器通信"><span>案例：多个客户端与服务器通信</span></a></h3><p>通常情况下服务器不应该只接受一个客户端请求，而应该不断接受来自客户端的所有请求，所以<code>Java</code>程序通常会通过循环，不断地调用<code>ServerSocket</code>的<code>accept()</code>方法。</p><p>如果服务器端要同时处理多个客户端的请求，服务器端需要<strong>为每个客户端单独分配一个线程来处理，否则无法实现同时处理的效果。</strong></p><p><strong><!----></strong></p><ul><li>每个客户端连接成功后，从键盘输入英文单词或中文，并发送给服务器</li><li>服务器收到客户端的消息后，把词语反转后返回给客户端</li><li>客户端接收服务器返回的词语，打印显示</li><li>当客户端输入<code>stop</code>时断开与服务器的连接</li><li>多个客户端可以同时给服务器发送词语，服务器可以同时处理多个客户端的请求</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404485630-6a421b6e-0b4c-461d-8558-68c1cfaa8b08.png" alt=""></p><ul><li><strong>服务器端代码</strong></li></ul><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">io</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">ServerSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> TCPCommunicateDemo2Server</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> args</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> throws</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 1. 创建ServerSocket</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        ServerSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> serverSocket </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> ServerSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">8888</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">服务器端启动，监听8888...</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 2. 监听客户端连接请求</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> count </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        while</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> clientSocket </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> serverSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">accept</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">第[</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> count </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">]个客户端连接成功...</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            count</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            ClientHandlerThread</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> clientHandlerThread </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> ClientHandlerThread</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">clientSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            clientHandlerThread</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">     * 处理客户端连接的线程</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> ClientHandlerThread</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">         * 客户端套接字</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">         */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">        private</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">         * 客户端ip</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">         */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">        private</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> ip</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">        public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> ClientHandlerThread</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Socket</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">socket </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            ip </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getInetAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getHostAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">         * 业务逻辑 处理与客户端的通信</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">         */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> run</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">                // 1. 获取输入流 接受客户端发来的数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">                BufferedReader</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> bufferedReader </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> BufferedReader</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> InputStreamReader</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getInputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(),</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">UTF-8</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">                // 2. 获取输出流 发送数据给客户端</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">                PrintStream</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> printStream </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> PrintStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getOutputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">                // 3. 接受数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">                String</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> line</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">                StringBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> stringBuilder </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> StringBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">                while</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> ((</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">line </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> bufferedReader</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">readLine</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">())</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> !=</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">                    // 4. 反转 返回给客户端</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                    stringBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> stringBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                    printStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">stringBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">line</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">reverse</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">ip </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> 客户端正常断开...</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">            }</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> catch</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Exception</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">ip </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> 客户端异常断开...</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">            }</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> finally</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">                // 5. 断开连接</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">                try</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                    socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">                }</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> catch</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">IOException</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                    e</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><ul><li><strong>客户端代码</strong></li></ul><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">io</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">ServerSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">util</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Scanner</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> TCPCommunicateDemo2Client</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> args</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> throws</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 1、准备Socket，连接服务器，需要指定服务器的IP地址和端口号</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> socket </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">127.0.0.1</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 8888</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 2、获取输出流，用来发送数据给服务器</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        PrintStream</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> printStream </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> PrintStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getOutputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 3、获取输入流，用来接收服务器发送给该客户端的数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        InputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> input </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getInputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        BufferedReader</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> bufferedReader </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> BufferedReader</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> InputStreamReader</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">input</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">UTF-8</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 4、 发送数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        Scanner</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> scanner </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> Scanner</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        while</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">输入发送给服务器的单词或成语：</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            String</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> message </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> scanner</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">nextLine</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">stop</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">))</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">shutdownOutput</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">                break</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            printStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 接收数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">从服务器收到的反馈是：</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> bufferedReader</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">readLine</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        //5、关闭socket，断开与服务器的连接</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        scanner</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><h3 id="案例-聊天室" tabindex="-1"><a class="header-anchor" href="#案例-聊天室"><span>案例：聊天室</span></a></h3><p><strong><!----></strong></p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">io</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">BufferedReader</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">io</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">io</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">InputStreamReader</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">io</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">PrintStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">ServerSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">util</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">LinkedList</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> TCPCommunicateDemo3ChatServer</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">     * 集合 存储在线的客户端</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    static</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> LinkedList</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> clients </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> LinkedList</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> args</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> throws</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 1. 启动服务器</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        ServerSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> serverSocket </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> ServerSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">8888</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">服务端上线，监听8888...</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // jil</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 2. 接受多个客户端连接</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        while</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> client </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> serverSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">accept</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            clients</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">client</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 3. 处理客户端连接</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            ClientHandlerThread</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> clientHandlerThread </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> ClientHandlerThread</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">client</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            clientHandlerThread</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">     * 客户端处理线程</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> ClientHandlerThread</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">         * 套接字</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">         */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">        private</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">         * 客户端ip</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">         */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">        private</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> ip</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">        public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> ClientHandlerThread</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Socket</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">socket </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">ip </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getInetAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getHostAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">         * 业务逻辑</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">         */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> run</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 上线提醒</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">                sendToOther</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">客户端上线...</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">                // 1. 接受客户端的输入数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">                InputStreamReader</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> inputStreamReader </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> InputStreamReader</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getInputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">                BufferedReader</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> bufferedReader </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> BufferedReader</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">inputStreamReader</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">                String</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> line</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">                // 先判断是否意外下线 再读取数据</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">                while</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">isConnected</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">line </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> bufferedReader</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">readLine</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">())</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> !=</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">                    // 2. 转发给其他用户</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">                    sendToOther</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">line</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">            }</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> catch</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">IOException</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">客户端意外下线了...</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">            }</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> finally</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">                // 3. 从在线列表移除客户端</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                clients</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">                // 4. 发送下线消息</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">                try</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">                    sendToOther</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">客户端下线了...</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">                }</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> catch</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">IOException</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                    e</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">         * 提醒其他用户 当前客户端上线</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">         *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">         * </span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#F78C6C;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> message</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">  要发送的消息</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">         * </span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#F78C6C;--shiki-dark-font-style:italic;">@param</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> jumpSelf</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;"> 是否跳过当前客户端自己</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">         */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> sendToOther</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> message</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> boolean</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> jumpSelf</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> throws</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 遍历所有在线用户 并转发信息</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">            for</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> client </span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> clients</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">                // 如果开启了跳过当前客户端 则不发送对应消息个当前客户端</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">jumpSelf </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> client </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">                    continue</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">                PrintStream</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> printStream </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> PrintStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">client</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getOutputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                printStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">ip </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> message</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><p><strong><!----></strong></p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">io</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">io</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">InputStreamReader</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">io</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">PrintStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">util</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Scanner</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> TCPCommunicateDemo3ChatClient</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> args</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> throws</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> InterruptedException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 1. 连接服务器</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> socket </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">127.0.0.1</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 8888</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 2. 开启发送和接受线程</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        SendHandlerThread</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> sendHandlerThread </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> SendHandlerThread</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        ReceiveHandlerThread</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> receiveHandlerThread </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> ReceiveHandlerThread</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        receiveHandlerThread</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        sendHandlerThread</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 不再发送数据 就关闭Socket</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        sendHandlerThread</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 3. 关闭Socket</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;"> * 发送线程</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> SendHandlerThread</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">     * 套接字</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> SendHandlerThread</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Socket</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">socket </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">     * 接收业务逻辑</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> run</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            PrintStream</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> printStream </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> PrintStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getOutputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            Scanner</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> scanner </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> Scanner</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 不断输入消息</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">            while</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">                String</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> line </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> scanner</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">nextLine</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">bye</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">line</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">))</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                    socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">shutdownOutput</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">                    break</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">                }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">                // 发送</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                printStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">line</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            scanner</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> catch</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">IOException</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            e</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;"> * 接受线程</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> ReceiveHandlerThread</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">     * 套接字</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> ReceiveHandlerThread</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Socket</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">socket </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">     * 发送业务逻辑</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> run</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 获取输入流</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            InputStreamReader</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> inputStreamReader </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> InputStreamReader</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getInputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            Scanner</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> scanner </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> Scanner</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">inputStreamReader</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 读取数据</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">            while</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">scanner</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">hasNextLine</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">())</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">                // 输出</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">scanner</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">nextLine</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> catch</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">IOException</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            e</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><h3 id="理解客户端、服务端" tabindex="-1"><a class="header-anchor" href="#理解客户端、服务端"><span>理解客户端、服务端</span></a></h3><ul><li>客户端： <ul><li>自定义</li><li>浏览器(<code>browser</code> <code>&lt;---&gt;</code> <code>server</code>)</li></ul></li><li>服务端： <ul><li>自定义</li><li>Tomcat服务器</li></ul></li></ul><h2 id="udp网络编程" tabindex="-1"><a class="header-anchor" href="#udp网络编程"><span><code>UDP</code>网络编程</span></a></h2><p><code>UDP</code>(<code>User Datagram Protocol</code>：用户数据报协议)，是<strong>一个无连接的传输层协议、提供面向事务的简单、不可靠的信息传送服务，类似于短信</strong>。</p><h3 id="通信模型-1" tabindex="-1"><a class="header-anchor" href="#通信模型-1"><span>通信模型</span></a></h3><ul><li><code>UDP</code>协议是一种<strong>面向非连接的协议</strong>，面向非连接指的是：在正式通信前不必与对方先建立连接，不管对方状态就直接发送，至于对方是否可以接收到这些数据内容，<code>UDP</code>协议无法控制。因此，<code>UDP</code>协议是一种<strong>不可靠的协议</strong>。<!---->。<code>UDP</code><!---->，没有<code>TCP</code>的确认机制、重传机制。如果因为网络原因没有传送到对端，<code>UDP</code>也不会给应用层返回错误信息</li><li><code>UDP</code>协议是<strong>面向数据报文</strong>的信息传送服务，<code>UDP</code><strong><!----></strong><code>IP</code><strong><!----></strong>。比如：要发送 <strong><code>100</code><strong>个字节的报文，调用一次</strong><code>send()</code><strong>方法就会发送</strong><code>100</code><strong>字节，接收方也需要用</strong><code>receive()</code><strong>方法一次性接收</strong><code>100</code><strong>字节，</strong><!----></strong><code>10</code><strong><!----></strong><code>10</code><strong><!----></strong></li><li><code>UDP</code>协议<strong>没有拥塞控制</strong>，<!----><strong><!----></strong><code>UDP</code><strong><!----></strong><code>UDP</code><strong><!----></strong><!----><strong><!----></strong>。这个对实时应用来说很重要，<strong>比如</strong>：视频通话、直播等应用</li><li><strong><!----></strong><code>UDP</code><strong><!----></strong><code>64K</code><strong><!----></strong></li></ul><p><img src="https://cdn.nlark.com/yuque/0/2024/png/2447732/1733404496121-7ec89190-e7a7-4f83-b651-3659031cfee7.png" alt=""></p><p><strong>类</strong><code>DatagramSocket</code><strong>和</strong><code>DatagramPacket</code><strong>实现了基于</strong><code>UDP</code><strong>协议网络程序</strong></p><ul><li><code>UDP</code>数据报通过数据报套接字<code>DatagramSocket</code>发送和接收，系统不保证<code>UDP</code>数据报一定能够安全送到目的地，也不能确定什么时候可以抵达</li><li><code>DatagramPacket</code><strong>对象封装了</strong><code>UDP</code><strong>数据报，在数据报中包含了发送端的</strong><code>IP</code><strong>地址和端口号以及接收端的</strong><code>IP</code><strong>地址和端口号</strong></li><li><code>UDP</code><strong><!----></strong>，如同发快递包裹一样</li></ul><h3 id="开发步骤-1" tabindex="-1"><a class="header-anchor" href="#开发步骤-1"><span>开发步骤</span></a></h3><p><strong><!----></strong></p><ul><li><code>1.</code>创建<code>DatagramSocket</code>：默认使用系统随机分配端口号</li><li><code>2.</code>创建<code>DatagramPacket</code>：将要发送的数据用字节数组表示，并指定要发送的数据长度，接收方的<code>IP</code>地址和端口号</li><li><code>3.</code>调用该<code>DatagramSocket</code>类对象的<code>send</code>方法：发送数据报<code>DatagramPacket</code>对象</li><li><code>4.</code>关闭<code>DatagramSocket</code>对象：发送端程序结束，关闭通信套接字</li></ul><p><strong><!----></strong></p><ul><li><code>1.</code>创建<code>DatagramSocket</code>：指定监听的端口号</li><li><code>2.</code>创建<code>DatagramPacket</code>：指定接收数据用的字节数组，起到临时数据缓冲区的效果，并指定最大可以接收的数据长度</li><li><code>3.</code>调用该<code>DatagramSocket</code>类对象的<code>receive</code>方法：接收数据报<code>DatagramPacket</code>对象</li><li><code>4.</code>关闭<code>DatagramSocket</code>：接收端程序结束，关闭通信套接字</li></ul><h3 id="发送和接收消息" tabindex="-1"><a class="header-anchor" href="#发送和接收消息"><span>发送和接收消息</span></a></h3><p>基于<code>UDP</code>协议的网络编程仍然需要在通信实例的两端各建立一个<code>Socket</code>，但<!----><code>Socket</code><!----><code>Socket</code><!---->，<code>Java</code>提供了<code>DatagramSocket</code>对象作为基于<code>UDP</code>协议的<code>Socket</code>，使用<code>DatagramPacket</code>代表<code>DatagramSocket</code>发送、接收的数据报。</p><h3 id="举例" tabindex="-1"><a class="header-anchor" href="#举例"><span>举例</span></a></h3><h4 id="案例1" tabindex="-1"><a class="header-anchor" href="#案例1"><span>案例<code>1</code></span></a></h4><p><strong><!----></strong></p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">io</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> UDPCommunicateDemo1Send</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> args</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        DatagramSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> ds </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 创建套接字</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            ds </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> DatagramSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">            byte</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> bytes </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">hello, this is a string ...</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 要发送的数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            DatagramPacket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> datagramPacket </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> DatagramPacket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">bytes</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> bytes</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> Inet4Address</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getByName</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">),</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 9999</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 发送</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            ds</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">datagramPacket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> catch</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">IOException</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            e</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> finally</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 关闭资源</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">ds </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                ds</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><p><strong><!----></strong></p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">io</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">DatagramPacket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">DatagramSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> UDPCommunicateDemo1Receive</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> args</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        DatagramSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> ds </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 创建套接字</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            ds </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> DatagramSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">9999</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 接收数据</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">            byte</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> bytes </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> byte</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            DatagramPacket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> datagramPacket </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> DatagramPacket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">bytes</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> bytes</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            ds</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">receive</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">datagramPacket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 输出</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            String</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> string </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">datagramPacket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getData</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(),</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> datagramPacket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getLength</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">string </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> from :</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> datagramPacket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> catch</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">IOException</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            e</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> finally</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 关闭资源</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">ds </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                ds</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><h4 id="案例2" tabindex="-1"><a class="header-anchor" href="#案例2"><span><strong>案例</strong><code>2</code></span></a></h4><p><strong><!----></strong></p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">io</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">util</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">ArrayList</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> UDPCommunicateDemo2Send</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> args</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> throws</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 1. 创建DatagramSocket</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        DatagramSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> datagramSocket </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> DatagramSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 2. 要发送的数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        ArrayList</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> strings </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> ArrayList</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        strings</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">字符串1</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        strings</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">字符串2</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        strings</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">字符串3</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 3. 发送多个数据报</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 接收方ip 接收放端口</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        InetAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> ip </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> Inet4Address</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getByName</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">localhost</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> targetPort </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 9999</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> strings</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> i</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 创建DatagramPacket</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">            byte</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> bytes </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> strings</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">i</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            DatagramPacket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> datagramPacket </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> DatagramPacket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">bytes</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> bytes</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> ip</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> targetPort</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 调用send发送</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            datagramSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">datagramPacket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 4. 关闭DatagramSocket</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        datagramSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><p><strong><!----></strong></p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">io</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">DatagramPacket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">DatagramSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> UDPCommunicateDemo2Receive</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> args</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> throws</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 1. 创建DatagramSocket</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        DatagramSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> datagramSocket </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> DatagramSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">9999</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 一直监听</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        while</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 2. 创建DatagramPacket</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">            byte</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> bytes </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> byte</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            DatagramPacket</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> datagramPacket </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> DatagramPacket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">bytes</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> bytes</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 3. 接收数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            datagramSocket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">receive</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">datagramPacket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 拆分数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            String</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> string </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">datagramPacket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getData</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(),</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> datagramPacket</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getLength</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><h2 id="url编程" tabindex="-1"><a class="header-anchor" href="#url编程"><span><code>URL</code>编程</span></a></h2><h3 id="url类" tabindex="-1"><a class="header-anchor" href="#url类"><span><code>URL</code>类</span></a></h3><ul><li><code>URL</code>(<code>Uniform Resource Locator</code>)：<strong><!----></strong>，它表示<code>Internet</code>上某一资源的地址</li><li>通过<code>URL</code>可以访问<code>Internet</code>上的各种网络资源，<strong>比如</strong>：<code>www</code>、<code>ftp</code> 站点，浏览器通过解析给定的<code>URL</code>可以在网络上查找相应的文件或其他资源</li><li><code>URL</code>的基本结构由<code>5</code>部分组成： <ul><li><code>&lt;传输协议&gt;://&lt;主机名&gt;:&lt;端口号&gt;/&lt;文件名&gt;#片段名?参数列表</code></li><li><strong>例如</strong>：<code>http://192.168.1.100:8080/helloworld/index.jsp#a?username=shkstart&amp;password=123</code><ul><li><strong>片段名</strong>：即锚点，<strong>例如</strong>：看小说，直接定位到章节</li><li><strong>参数列表格式</strong>：<code>参数名=参数值&amp;参数名=参数值</code>...</li></ul></li></ul></li><li>为了表示<code>URL</code>，<code>java.net</code>中实现了类<code>URL</code><ul><li><strong>构造器：</strong><ul><li><code>public URL(String spec)</code>：通过一个表示<code>URL</code>地址的字符串可以构造一个<code>URL</code>对象 <ul><li><code>URL url = new URL(&quot;http://www. atguigu.com/&quot;)</code></li></ul></li><li><code>public URL(URL context, String spec)</code>：通过基<code>URL</code>和相对<code>URL</code>构造<code>URL</code> 对象 <ul><li><code>URL downloadUrl = new URL(url, &quot;download.html&quot;)</code></li></ul></li><li><code>public URL(String protocol, String host, String file)</code><ul><li><code>URL url = new URL(&quot;http&quot;, &quot;www.atguigu.com&quot;, &quot;download. html&quot;)</code></li></ul></li><li><code>public URL(String protocol, String host, int port, String file)</code><ul><li><code>URL gamelan = new URL(&quot;http&quot;, &quot;www.atguigu.com&quot;, 80, &quot;download.html&quot;)</code></li></ul></li></ul></li></ul></li><li><code>URL</code>类的构造器都声明 <strong><!----></strong>，必须要对这一异常进行处理，通常是用<code>try-catch</code>语句进行捕获</li></ul><h3 id="url类常用方法" tabindex="-1"><a class="header-anchor" href="#url类常用方法"><span><code>URL</code>类常用方法</span></a></h3><p>一个<code>URL</code>对象生成后<!---->：</p><ul><li><code>public String getProtocol()</code>：获取该<code>URL</code>的<strong>协议名</strong></li><li><code>public String getHost()</code>：获取该<code>URL</code>的<strong>主机名</strong></li><li><code>public String getPort()</code>：获取该<code>URL</code>的<strong>端口号</strong></li><li><code>public String getPath()</code>：获取该<code>URL</code>的<strong>文件路径</strong></li><li><code>public String getFile()</code>：获取该<code>URL</code>的<strong>文件名</strong></li><li><code>public String getQuery()</code>：获取该<code>URL</code>的<strong>查询</strong></li></ul><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">MalformedURLException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">net</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">URL</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> URLTest</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> args</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> throws</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> MalformedURLException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 构建URL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        URL</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> url </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">https://www.example.com:8080/path/to/resource?query=value&amp;param=123</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 协议 https</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">getProtocol: </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> url</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getProtocol</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 主机 www.example.com</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">getHost: </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> url</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getHost</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 端口 8080</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">getPort: </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> url</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getPort</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 路径 /path/to/resource</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">getPath: </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> url</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getPath</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 文件 /path/to/resource?query=value&amp;param=123</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">getFile: </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> url</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getFile</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 查询字符串 query=value&amp;param=123</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">getQuery: </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> url</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><h3 id="针对http协议的urlconnection类" tabindex="-1"><a class="header-anchor" href="#针对http协议的urlconnection类"><span>针对<code>HTTP</code>协议的<code>URLConnection</code>类</span></a></h3><ul><li><code>URL</code>的方法<code>openStream()</code>：能从网络上读取数据</li><li>若希望输出数据，<strong>例如</strong>：向服务器端的<code>CGI</code>(公共网关接口，<code>Common Gateway Interface</code>，是用户浏览器和服务器端的应用程序进行连接的接口)程序发送一些数据，则必须先与<code>URL</code>建立连接，然后才能对其进行读写，此时需要使用<code>URLConnection</code></li><li><code>URLConnection</code><strong>：表示到</strong><code>URL</code><strong>所引用的远程对象的连接。当与一个</strong><code>URL</code><strong>建立连接时，首先要在一个</strong><code>URL</code><strong>对象上通过方法</strong><code>openConnection()</code><strong>生成对应的</strong><code>URLConnection</code><strong>对象，如果连接过程失败，将产生</strong><code>IOException</code><ul><li><code>URL netchinaren = new URL(&quot;http://www.atguigu.com/index.shtml&quot;);</code></li><li><code>URLConnectonn u = netchinaren.openConnection();</code></li></ul></li><li><strong>通过</strong><code>URLConnection</code><strong>对象获取的输入流和输出流，即可以与现有的</strong><code>CGI</code><strong>程序进行交互</strong><ul><li><code>public Object getContent() throws IOException</code></li><li><code>public int getContentLength()</code></li><li><code>public String getContentType()</code></li><li><code>public long getDate()</code></li><li><code>public long getLastModified()</code></li><li><code>public InputStream getInputStream () throws IOException</code></li><li><code>public OutputSteram getOutputStream()throws IOException</code></li></ul></li></ul><h3 id="小结" tabindex="-1"><a class="header-anchor" href="#小结"><span>小结</span></a></h3><ul><li>位于网络中的计算机具有唯一的<code>IP</code>地址，这样不同的主机可以互相区分</li><li><code>客户端-服务器</code>是一种最常见的网络应用程序模型。<strong>服务器</strong>是一个为其客户端提供某种特定服务的硬件或软件。<strong>客户机</strong>是一个用户应用程序，用于访问某台服务器提供的服务。<strong>端口号</strong>是对一个服务的访问场所，它用于区分同一物理计算机上的多个服务。<strong>套接字</strong>用于连接客户端和服务器，客户端和服务器之间的每个通信会话使用一个不同的套接字。<code>TCP</code>协议用于实现面向连接的会话</li><li><code>Java</code><strong>中有关网络方面的功能都定义在</strong><code>java.net</code><strong>程序包中</strong>。<code>Java</code>用<code>InetAddress</code>表示<code>IP</code>地址，该对象里有两个字段：主机名(<code>String</code>) 和<code>IP</code>地址(<code>int</code>)</li><li>类<code>Socket</code>和<code>ServerSocket</code>实现了基于<code>TCP</code>协议的<code>客户端-服务器</code>程序。<code>Socket</code>是客户端和服务器之间的一个连接，连接创建的细节被隐藏了，这个连接提供了一个安全的数据传输通道，这是因为<code>TCP</code>协议可以解决数据在传送过程中的丢失、损坏、重复、乱序以及网络拥挤等问题，它保证数据可靠的传送</li><li>类<code>URL</code>和<code>URLConnection</code>提供了高级网络应用，通过<code>URL</code>的网络资源的位置来统一表示<code>Internet</code>上各种网络资源。通过<code>URL</code>对象可以创建当前应用程序和<code>URL</code>表示的网络资源之间的连接，这样当前程序就可以读取网络资源数据或者把自己的数据传送到网络上去</li></ul></div><!----><!----><!----></div></main><footer class="vp-doc-footer" data-v-0d7da0a5 data-v-83bdd30b><!--[--><!--]--><!----><div class="contributors" aria-label="Contributors" data-v-83bdd30b><span class="contributors-label" data-v-83bdd30b>贡献者: </span><span class="contributors-info" data-v-83bdd30b><!--[--><!--[--><span class="contributor" data-v-83bdd30b>weew12</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-83bdd30b><div class="pager" data-v-83bdd30b><a class="vp-link link pager-link prev" href="/language/java/xbz1gklc/" data-v-83bdd30b><!--[--><span class="desc" data-v-83bdd30b>上一页</span><span class="title" data-v-83bdd30b>15 File类与IO流</span><!--]--><!----></a></div><div class="pager" data-v-83bdd30b><a class="vp-link link pager-link next" href="/language/java/engvia7u/" data-v-83bdd30b><!--[--><span class="desc" data-v-83bdd30b>下一页</span><span class="title" data-v-83bdd30b>17 反射机制</span><!--]--><!----></a></div></nav></footer><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;" data-v-0d7da0a5><div style="display: flex;align-items: center;justify-content: center;height: 96px"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);--icon-size: 48px;display: inline-block;width: var(--icon-size);height: var(--icon-size);background-color: currentcolor;-webkit-mask-image: var(--loading-icon);mask-image: var(--loading-icon)"></span></div></div><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-27c095d7 data-v-7a5f51ab><span class="percent" data-allow-mismatch data-v-7a5f51ab>0%</span><span class="show icon vpi-back-to-top" data-v-7a5f51ab></span><svg aria-hidden="true" data-v-7a5f51ab><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-7a5f51ab></circle></svg></button><footer class="vp-footer has-sidebar" vp-footer data-v-27c095d7 data-v-fe15003d><!--[--><div class="container" data-v-fe15003d><!----><p class="copyright" data-v-fe15003d>Copyright © 2026 weew12</p></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/assets/app-BO2U5m27.js" defer></script></body></html>