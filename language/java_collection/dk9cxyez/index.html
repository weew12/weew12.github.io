<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.24" /><meta name="theme" content="VuePress Theme Plume " /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"09_Java集合框架核心知识点与典型面试题解析","image":[""],"dateModified":"2025-12-18T08:40:38.000Z","author":[]}</script><meta property="og:url" content="https://weew12.github.io/language/java_collection/dk9cxyez/"><meta property="og:site_name" content="WEEW12 BLOG"><meta property="og:title" content="09_Java集合框架核心知识点与典型面试题解析"><meta property="og:description" content="知识体系概览 高频面试题分类 基础概念类 ArrayList、LinkedList、Vector的区别与使用场景 核心要点： 底层结构：ArrayList基于动态数组，LinkedList基于双向链表，Vector基于动态数组 线程安全性：Vector线程安全（synchronized），ArrayList和LinkedList非线程安全 性能特点： ..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-12-18T08:40:38.000Z"><meta property="article:modified_time" content="2025-12-18T08:40:38.000Z"><link rel="icon" type="image/png" href="/favicon.ico"><meta name="referrer" content="no-referrer"><title>09_Java集合框架核心知识点与典型面试题解析 | WEEW12 BLOG</title><meta name="description" content="知识体系概览 高频面试题分类 基础概念类 ArrayList、LinkedList、Vector的区别与使用场景 核心要点： 底层结构：ArrayList基于动态数组，LinkedList基于双向链表，Vector基于动态数组 线程安全性：Vector线程安全（synchronized），ArrayList和LinkedList非线程安全 性能特点： ..."><link rel="preload" href="/assets/style-VKnRds0j.css" as="style"><link rel="stylesheet" href="/assets/style-VKnRds0j.css"><link rel="modulepreload" href="/assets/app-BO2U5m27.js"><link rel="modulepreload" href="/assets/index.html-vOtROLt3.js"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-27c095d7><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-f5342612></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-f5342612> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-27c095d7 data-v-ae750b7e><div class="vp-navbar" vp-navbar data-v-ae750b7e data-v-3002d082><div class="wrapper" data-v-3002d082><div class="container" data-v-3002d082><div class="title" data-v-3002d082><div class="vp-navbar-title has-sidebar" data-v-3002d082 data-v-666dade2><a class="vp-link link no-icon title" href="/" data-v-666dade2><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" style="" src="/logo.png" alt data-v-bc1f2c6d><!--]--><!--[--><img class="vp-image light logo" style="" src="/logo.png" alt data-v-bc1f2c6d><!--]--><!--]--><!--]--><span data-v-666dade2>WEEW12 BLOG</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-3002d082><div class="content-body" data-v-3002d082><!--[--><!--]--><div class="vp-navbar-search search" data-v-3002d082><div class="search-wrapper" data-v-97535d1e><!----><div id="local-search" data-v-97535d1e><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-97535d1e><span class="mini-search-button-container"><span class="mini-search-search-icon vpi-mini-search" aria-label="search icon"></span><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><!--[--><!--]--><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-3002d082 data-v-de5fb40d><span id="main-nav-aria-label" class="visually-hidden" data-v-de5fb40d>Main Navigation</span><!--[--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/" tabindex="0" data-v-de5fb40d data-v-bc304da9><!--[--><!----><span data-v-bc304da9>博客</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/tags/" tabindex="0" data-v-de5fb40d data-v-bc304da9><!--[--><!----><span data-v-bc304da9>标签</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/categories/" tabindex="0" data-v-de5fb40d data-v-bc304da9><!--[--><!----><span data-v-bc304da9>分类</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/archives/" tabindex="0" data-v-de5fb40d data-v-bc304da9><!--[--><!----><span data-v-bc304da9>归档</span><!----><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-de5fb40d data-v-4393febb><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-4393febb><span class="text" data-v-4393febb><!----><!----><span data-v-4393febb>笔记</span><!----><span class="vpi-chevron-down text-icon" data-v-4393febb></span></span></button><div class="menu" data-v-4393febb><div class="vp-menu" data-v-4393febb data-v-471c6636><div class="items" data-v-471c6636><!--[--><!--[--><div class="vp-menu-group" data-v-471c6636 data-v-1ee9ef5f><p class="title" data-v-1ee9ef5f><!----><span data-v-1ee9ef5f>后端</span></p><!--[--><!--[--><div class="vp-menu-link" data-v-1ee9ef5f data-v-04daa31f><a class="vp-link link" href="/language/java/1pj4wq5u/" data-v-04daa31f><!--[--><!----> 语言基础 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-1ee9ef5f data-v-04daa31f><a class="vp-link link" href="/framework/heima_ssm_book/r3rcs5o0/" data-v-04daa31f><!--[--><!----> 框架相关 <span class="vp-badge tip vp-menu-badge" style="" data-v-04daa31f data-v-26900783><!--[-->new<!--]--></span><!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="vp-menu-group" data-v-471c6636 data-v-1ee9ef5f><p class="title" data-v-1ee9ef5f><!----><span data-v-1ee9ef5f>数据库</span></p><!--[--><!--[--><div class="vp-menu-link" data-v-1ee9ef5f data-v-04daa31f><a class="vp-link link" href="/mysql/q449w0j5/" data-v-04daa31f><!--[--><!----> MYSQL <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!--[--><!--]--><!----><div class="vp-navbar-appearance appearance" data-v-3002d082 data-v-07ea9724><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-07ea9724 data-v-4b98d79f data-v-51d980cd><span class="check" data-v-51d980cd><span class="icon" data-v-51d980cd><!--[--><span class="vpi-sun sun" data-v-4b98d79f></span><span class="vpi-moon moon" data-v-4b98d79f></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-3002d082 data-v-99a107d5 data-v-3ad50ecc><!--[--><a class="vp-social-link no-icon" href="https://github.com/weew12" aria-label="github" target="_blank" rel="noopener" data-v-3ad50ecc data-v-959e34fc><span class="vpi-social-github" /></a><a class="vp-social-link no-icon" href="mailto:2528566339@qq.com" aria-label="qq" target="_blank" rel="noopener" data-v-3ad50ecc data-v-959e34fc><span class="vpi-social-qq" /></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-3002d082 data-v-d8b05a8e data-v-4393febb><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-4393febb><span class="vpi-more-horizontal icon" data-v-4393febb></span></button><div class="menu" data-v-4393febb><div class="vp-menu" data-v-4393febb data-v-471c6636><!----><!--[--><!--[--><!----><div class="group" data-v-d8b05a8e><div class="item appearance" data-v-d8b05a8e><p class="label" data-v-d8b05a8e>外观</p><div class="appearance-action" data-v-d8b05a8e><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-d8b05a8e data-v-4b98d79f data-v-51d980cd><span class="check" data-v-51d980cd><span class="icon" data-v-51d980cd><!--[--><span class="vpi-sun sun" data-v-4b98d79f></span><span class="vpi-moon moon" data-v-4b98d79f></span><!--]--></span></span></button></div></div></div><div class="group" data-v-d8b05a8e><div class="item social-links" data-v-d8b05a8e><div class="vp-social-links social-links-list" data-v-d8b05a8e data-v-3ad50ecc><!--[--><a class="vp-social-link no-icon" href="https://github.com/weew12" aria-label="github" target="_blank" rel="noopener" data-v-3ad50ecc data-v-959e34fc><span class="vpi-social-github" /></a><a class="vp-social-link no-icon" href="mailto:2528566339@qq.com" aria-label="qq" target="_blank" rel="noopener" data-v-3ad50ecc data-v-959e34fc><span class="vpi-social-qq" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-3002d082 data-v-e5558799><span class="container" data-v-e5558799><span class="top" data-v-e5558799></span><span class="middle" data-v-e5558799></span><span class="bottom" data-v-e5558799></span></span></button></div></div></div></div><div class="divider" data-v-3002d082><div class="divider-line" data-v-3002d082></div></div></div><!----></header><div class="vp-local-nav reached-top" data-v-27c095d7 data-v-b0433a68><button class="menu" aria-expanded="false" aria-controls="SidebarNav" data-v-b0433a68><span class="vpi-align-left menu-icon" data-v-b0433a68></span><span class="menu-text" data-v-b0433a68>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-b0433a68 data-v-358fac30><button data-v-358fac30>返回顶部</button><!----></div></div><aside class="vp-sidebar" vp-sidebar data-v-27c095d7 data-v-fd62cea1><div class="curtain" data-v-fd62cea1></div><nav id="SidebarNav" class="nav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-fd62cea1><span id="sidebar-aria-label" class="visually-hidden" data-v-fd62cea1> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-e274f709><section class="vp-sidebar-item sidebar-item level-0 collapsible collapsed" data-v-e274f709 data-v-994e26d4><div class="item" role="button" tabindex="0" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><h2 class="text" data-v-994e26d4><span data-v-994e26d4>Java语言基础</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-994e26d4><span class="vpi-chevron-right caret-icon" data-v-994e26d4></span></div></div><div style="display:none;" data-v-994e26d4 data-v-994e26d4><div class="items" data-v-994e26d4><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/gofne3j6/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>0 内容来源</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/1pj4wq5u/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>1 Java 语言基础</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/k3nmchta/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>2 变量与运算符</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/s2woyft5/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>3 流程控制语句</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/zwkzypc5/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>4 IDEA的安装与使用</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/r6rvf6kx/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>5 数组</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/aml0zxx3/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>6 面向对象编程（基础）</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/fkirt3by/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>7 面向对象编程（进阶）</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/9vg2o834/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>8 面向对象编程（高级）</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/trz4w8wh/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>9 异常处理</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/x7n888dm/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>10 多线程</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/weqlsenw/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>11 常用类和基础 API</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/fqqt45mw/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>12 集合框架</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/zwfxpbpd/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>13 数据结构与集合源码</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/4u2og2wz/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>14 泛型(Generic)</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/xbz1gklc/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>15 File类与IO流</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/wqc0nsk7/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>16 网络编程</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/engvia7u/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>17 反射机制</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java/ztxsqetm/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>18 JDK8_17新特性</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><div class="no-transition group" data-v-e274f709><section class="vp-sidebar-item sidebar-item level-0 collapsible has-active" data-v-e274f709 data-v-994e26d4><div class="item" role="button" tabindex="0" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><h2 class="text" data-v-994e26d4><span data-v-994e26d4>Java集合专栏</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-994e26d4><span class="vpi-chevron-right caret-icon" data-v-994e26d4></span></div></div><div data-v-994e26d4 data-v-994e26d4><div class="items" data-v-994e26d4><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/nb9o1y1d/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>01_Java集合框架体系结构与核心接口原理</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/qok33b3d/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>02_List接口规范与实现类深度分析</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/9dkr7vtb/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>03_Set接口规范与实现类深度分析</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/c1hjqmcc/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>04_Map接口规范与实现类深度分析</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/1jxugnzo/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>05_Queue与Deque接口规范与实现类深度分析</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/xevgd32q/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>06_迭代器设计模式与Spliterator机制原理</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/t574v1jn/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>07_Java集合工具类API原理与应用实践</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/dbwmlw7k/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>08_Java并发集合框架设计原理与实现机制</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/dk9cxyez/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>09_Java集合框架核心知识点与典型面试题解析</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/worogkiq/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>10_Java 8+函数式特性与集合框架集成原理</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-994e26d4 data-v-994e26d4><div class="item" data-v-994e26d4><div class="indicator" data-v-994e26d4></div><!----><a class="vp-link link link" href="/language/java_collection/amdfdlox/" data-v-994e26d4><!--[--><p class="text" data-v-994e26d4><span data-v-994e26d4>11_Java集合框架学习体系与进阶指南</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><!--]--><!--[--><!--]--></nav></aside><!--[--><div id="VPContent" vp-content class="vp-content has-sidebar" data-v-27c095d7 data-v-5b39a01b><div class="vp-doc-container has-sidebar has-aside" data-v-5b39a01b data-v-0d7da0a5><!--[--><!--]--><div class="container" data-v-0d7da0a5><div class="aside" vp-outline data-v-0d7da0a5><div class="aside-curtain" data-v-0d7da0a5></div><div class="aside-container" data-v-0d7da0a5><div class="aside-content" data-v-0d7da0a5><div class="vp-doc-aside" data-v-0d7da0a5 data-v-6df97c7f><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="vp-doc-aside-outline" role="navigation" data-v-6df97c7f data-v-3003aeb2><div class="content" data-v-3003aeb2><div class="outline-marker" data-v-3003aeb2></div><div id="doc-outline-aria-label" aria-level="2" class="outline-title" role="heading" data-v-3003aeb2><span data-v-3003aeb2>目录</span><span class="vpi-print icon" data-v-3003aeb2></span></div><ul class="root" data-v-3003aeb2 data-v-f4c16ca0><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-6df97c7f></div><!--[--><!--]--></div></div></div></div><div class="content" data-v-0d7da0a5><div class="content-container" data-v-0d7da0a5><!--[--><!--]--><main class="main" data-v-0d7da0a5><nav class="vp-breadcrumb" data-v-0d7da0a5 data-v-eeb0b690><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-eeb0b690><!--[--><li property="itemListElement" typeof="ListItem" data-v-eeb0b690><a class="vp-link link breadcrumb" href="/" property="item" typeof="WebPage" data-v-eeb0b690><!--[-->首页<!--]--><!----></a><span class="vpi-chevron-right" data-v-eeb0b690></span><meta property="name" content="首页" data-v-eeb0b690><meta property="position" content="1" data-v-eeb0b690></li><li property="itemListElement" typeof="ListItem" data-v-eeb0b690><span class="vp-link breadcrumb" property="item" typeof="WebPage" data-v-eeb0b690><!--[-->Java集合专栏<!--]--><!----></span><span class="vpi-chevron-right" data-v-eeb0b690></span><meta property="name" content="Java集合专栏" data-v-eeb0b690><meta property="position" content="2" data-v-eeb0b690></li><li property="itemListElement" typeof="ListItem" data-v-eeb0b690><a class="vp-link link breadcrumb current" href="/language/java_collection/dk9cxyez/" property="item" typeof="WebPage" data-v-eeb0b690><!--[-->09_Java集合框架核心知识点与典型面试题解析<!--]--><!----></a><!----><meta property="name" content="09_Java集合框架核心知识点与典型面试题解析" data-v-eeb0b690><meta property="position" content="3" data-v-eeb0b690></li><!--]--></ol></nav><!--[--><!--]--><!--[--><h1 class="vp-doc-title page-title" data-v-e9ba3c81><!----> 09_Java集合框架核心知识点与典型面试题解析 <!----></h1><div class="vp-doc-meta" data-v-e9ba3c81><!--[--><!--]--><p class="reading-time" data-v-e9ba3c81><span class="vpi-books icon" data-v-e9ba3c81></span><span data-v-e9ba3c81>约 8219 字</span><span data-v-e9ba3c81>大约 27 分钟</span></p><!----><!--[--><!--]--><p class="create-time" data-v-e9ba3c81><span class="vpi-clock icon" data-v-e9ba3c81></span><span data-v-e9ba3c81>2025-11-17</span></p></div><!--]--><!--[--><!--]--><div class="_language_java_collection_dk9cxyez_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-0d7da0a5><!--[--><!--]--><div data-v-0d7da0a5><h2 id="知识体系概览" tabindex="-1"><a class="header-anchor" href="#知识体系概览"><span>知识体系概览</span></a></h2><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div style="display:flex;align-items:center;justify-content:center;height:96px;" class="mermaid-loading"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);--icon-size: 48px;display: inline-block;width: var(--icon-size);height: var(--icon-size);background-color: currentcolor;-webkit-mask-image: var(--loading-icon);mask-image: var(--loading-icon)"></span></div></div><!--]--><h2 id="高频面试题分类" tabindex="-1"><a class="header-anchor" href="#高频面试题分类"><span>高频面试题分类</span></a></h2><h3 id="基础概念类" tabindex="-1"><a class="header-anchor" href="#基础概念类"><span>基础概念类</span></a></h3><h4 id="arraylist、linkedlist、vector的区别与使用场景" tabindex="-1"><a class="header-anchor" href="#arraylist、linkedlist、vector的区别与使用场景"><span><code>ArrayList</code>、<code>LinkedList</code>、<code>Vector</code>的区别与使用场景</span></a></h4><p><strong>核心要点</strong>：</p><ul><li><strong>底层结构</strong>：<code>ArrayList</code>基于动态数组，<code>LinkedList</code>基于双向链表，<code>Vector</code>基于动态数组</li><li><strong>线程安全性</strong>：<code>Vector</code>线程安全（synchronized），<code>ArrayList</code>和<code>LinkedList</code>非线程安全</li><li><strong>性能特点</strong>： <ul><li><code>ArrayList</code>：随机访问快（O(1)），插入删除慢（O(n)）</li><li><code>LinkedList</code>：随机访问慢（O(n)），插入删除快（O(1)）</li><li><code>Vector</code>：性能较低，已被并发集合替代（如<code>ConcurrentHashMap</code>、<code>CopyOnWriteArrayList</code>）</li></ul></li><li><strong>内存占用</strong>：<code>ArrayList</code>内存连续，<code>LinkedList</code>每个节点有前后指针开销</li><li><strong>扩容机制</strong>：<code>ArrayList</code>扩容为1.5倍，<code>Vector</code>扩容为2倍</li></ul><p><strong>使用场景</strong>：</p><ul><li><code>ArrayList</code>：读多写少，需要频繁随机访问</li><li><code>LinkedList</code>：写多读少，频繁插入删除，或需要作为队列/栈使用</li><li><code>Vector</code>：几乎不推荐使用，可用<code>CopyOnWriteArrayList</code>或<code>Collections.synchronizedList</code>替代</li></ul><h4 id="hashmap的工作原理和实现细节" tabindex="-1"><a class="header-anchor" href="#hashmap的工作原理和实现细节"><span><code>HashMap</code>的工作原理和实现细节</span></a></h4><p><strong>核心要点</strong>：</p><ul><li><strong>存储结构</strong>：<code>JDK 8+</code>采用数组+链表/红黑树结构</li><li><strong>哈希算法</strong>：<code>key.hashCode()</code> → 扰动函数 → 取模定位桶</li><li><strong>冲突解决</strong>：链地址法（链表+红黑树）</li><li><strong>红黑树转换</strong>：链表长度&gt;=<code>8</code>且数组长度&gt;=<code>64</code>时转换为红黑树</li><li><strong>扩容机制</strong>： <ul><li>触发条件：元素数量 &gt; 数组长度 * 负载因子(默认<code>0.75</code>)</li><li>扩容大小：原容量的<code>2</code>倍</li><li><code>JDK 8+</code>优化：扩容时无需重新计算哈希，只需判断最高位是否为1，决定是否迁移到新桶</li></ul></li><li><strong>线程安全性</strong>：非线程安全，可能导致死循环、数据丢失等问题</li><li><code>key</code><strong>允许为</strong><code>null</code>：放在数组索引<code>0</code>的位置</li></ul><p><strong>JDK 7 vs JDK 8的主要区别</strong>：</p><ul><li><strong>存储结构</strong>：<code>JDK 7</code>用数组+链表，<code>JDK 8</code>用数组+链表/红黑树</li><li><strong>链表插入</strong>：<code>JDK 7</code>用头插法，<code>JDK 8</code>用尾插法</li><li><strong>扩容机制</strong>：<code>JDK 8</code>优化了重新哈希的过程，无需重新计算哈希，只需判断最高位是否为1，决定是否迁移到新桶</li><li><strong>性能</strong>：<code>JDK 8</code>在哈希冲突严重时性能更好</li></ul><h4 id="hashset、treeset、linkedhashset的区别与使用场景" tabindex="-1"><a class="header-anchor" href="#hashset、treeset、linkedhashset的区别与使用场景"><span><code>HashSet</code>、<code>TreeSet</code>、<code>LinkedHashSet</code>的区别与使用场景</span></a></h4><p><strong>核心要点</strong>：</p><ul><li><strong>底层实现</strong>：<code>HashSet</code>基于<code>HashMap</code>，<code>TreeSet</code>基于<code>TreeMap</code>，<code>LinkedHashSet</code>基于<code>LinkedHashMap</code></li><li><strong>排序特性</strong>：<code>HashSet</code>无序，<code>TreeSet</code>有序（自然排序或自定义排序），<code>LinkedHashSet</code>维护插入顺序</li><li><strong>性能特点</strong>： <ul><li><code>HashSet</code>：添加、查询、删除都是<code>O(1)</code></li><li><code>TreeSet</code>：添加、查询、删除都是<code>O(log n)</code></li><li><code>LinkedHashSet</code>：略慢于<code>HashSet</code>，但支持插入顺序遍历</li></ul></li><li><strong>null值</strong>：<code>HashSet</code>和<code>LinkedHashSet</code>允许一个<code>null</code>，<code>TreeSet</code>不允许<code>null</code></li><li><strong>使用场景</strong>： <ul><li><code>HashSet</code>：只需去重，不关心顺序</li><li><code>TreeSet</code>：需要排序或范围查询</li><li><code>LinkedHashSet</code>：需要去重并保持插入顺序</li></ul></li></ul><h3 id="性能优化类" tabindex="-1"><a class="header-anchor" href="#性能优化类"><span>性能优化类</span></a></h3><h4 id="集合类的性能优化技巧" tabindex="-1"><a class="header-anchor" href="#集合类的性能优化技巧"><span>集合类的性能优化技巧</span></a></h4><p><strong>核心要点</strong>：</p><ol><li><strong>初始容量设置</strong>：根据预期元素数量设置合理的初始容量，避免频繁扩容</li><li><strong>负载因子调整</strong>：权衡时间和空间效率（<code>HashMap</code>默认<code>0.75</code>）</li><li><strong>减少哈希冲突</strong>：合理实现<code>hashCode()</code>和<code>equals()</code>方法</li><li><strong>选择合适集合</strong>：根据操作特性选择合适的集合实现</li><li><strong>批量操作</strong>：使用<code>addAll()</code>等批量方法替代循环添加</li><li><strong>避免自动装箱</strong>：优先使用原始类型集合（如<code>IntArrayList</code>），避免自动装箱拆箱操作</li><li><strong>及时清理</strong>：不再使用的集合应及时置为<code>null</code>，帮助<code>GC</code>回收内存</li><li><strong>迭代器使用</strong>：优先使用迭代器遍历，避免使用随机访问</li></ol><h4 id="并发集合的选择与使用" tabindex="-1"><a class="header-anchor" href="#并发集合的选择与使用"><span>并发集合的选择与使用</span></a></h4><p><strong>核心要点</strong>：</p><ol><li><strong>读多写少场景</strong>：使用<code>CopyOnWriteArrayList</code>/<code>CopyOnWriteArraySet</code></li><li><strong>高频读写场景</strong>：使用<code>ConcurrentHashMap</code></li><li><strong>有序并发Map</strong>：使用<code>ConcurrentSkipListMap</code></li><li><strong>生产者-消费者模式</strong>：使用<code>BlockingQueue</code>实现</li><li><strong>避免使用</strong>：尽量避免使用<code>Hashtable</code>和<code>Vector</code>，因为它们都是线程安全的，性能较低</li><li><strong>细粒度锁</strong>：并发集合通常使用细粒度锁或无锁算法，性能优于<code>Collections.synchronizedXxx()</code></li><li><strong>弱一致性</strong>：理解并发集合迭代器的弱一致性语义</li></ol><h3 id="源码理解类" tabindex="-1"><a class="header-anchor" href="#源码理解类"><span>源码理解类</span></a></h3><h4 id="equals-和hashcode-方法的契约及正确实现" tabindex="-1"><a class="header-anchor" href="#equals-和hashcode-方法的契约及正确实现"><span><code>equals()</code>和<code>hashCode()</code>方法的契约及正确实现</span></a></h4><p><strong>核心要点</strong>：</p><ol><li><strong>契约关系</strong>： <ul><li>如果两个对象<code>equals</code>，则它们的<code>hashCode</code>必须相等</li><li>如果两个对象<code>hashCode</code>不相等，则它们一定不<code>equals</code></li><li>同一对象多次调用<code>hashCode()</code>应返回相同值（只要对象未被修改）</li></ul></li><li><strong>常见错误</strong>： <ul><li>只重写<code>equals()</code>而不重写<code>hashCode()</code></li><li><code>hashCode()</code>实现过于简单，导致大量哈希冲突</li><li><code>equals()</code>实现违反自反性、对称性、传递性</li></ul></li><li><strong>正确实现原则</strong>： <ul><li><code>equals()</code>：考虑所有关键属性，处理<code>null</code>和类型检查</li><li><code>hashCode()</code>：结合所有关键属性，使用质数乘积法减少冲突（如<code>31 * hash + field</code>）</li></ul></li></ol><p><strong>示例代码</strong>：</p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> Employee</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> age</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> equals</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Object</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> o</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">this</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> ==</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> o</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> return</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">o </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> ||</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> getClass</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> !=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> o</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getClass</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">())</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> return</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        Employee</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> employee </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">Employee</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> o</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> age </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> employee</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">age </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">               Objects</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> employee</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">               Objects</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> employee</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> hashCode</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> Objects</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">hash</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> age</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><h4 id="hashmap的扩容机制与线程安全问题" tabindex="-1"><a class="header-anchor" href="#hashmap的扩容机制与线程安全问题"><span><code>HashMap</code>的扩容机制与线程安全问题</span></a></h4><p><strong>核心要点</strong>：</p><ol><li><strong>扩容过程</strong>： <ul><li>创建新的更大的数组（原容量的<code>2</code>倍）</li><li>重新计算每个元素在新数组中的位置</li><li>将元素复制到新数组</li></ul></li><li><strong>JDK 7线程安全问题</strong>： <ul><li>多线程并发扩容可能导致链表成环</li><li>导致<code>get()</code>操作进入死循环</li><li>原因：头插法+多线程并发修改</li></ul></li><li><strong>JDK 8改进</strong>： <ul><li>使用尾插法避免链表成环</li><li>但仍非线程安全，可能导致数据丢失</li></ul></li><li><strong>线程安全替代方案</strong>： <ul><li><code>ConcurrentHashMap</code>：高并发场景下的线程安全Map实现</li><li><code>Collections.synchronizedMap</code>：低并发场景下的线程安全Map包装器</li><li><code>HashTable</code>：不推荐使用，因为它是同步的，性能较低</li></ul></li></ol><h3 id="实战应用类" tabindex="-1"><a class="header-anchor" href="#实战应用类"><span>实战应用类</span></a></h3><h4 id="如何实现线程安全的单例模式" tabindex="-1"><a class="header-anchor" href="#如何实现线程安全的单例模式"><span>如何实现线程安全的单例模式</span></a></h4><p><strong>核心要点</strong>：</p><ol><li><strong>枚举单例</strong>：最简单且线程安全的方式</li><li><strong>双重检查锁定</strong>：需要使用<code>volatile</code>关键字防止指令重排序导致的线程安全问题</li><li><strong>静态内部类</strong>：利用类加载机制保证线程安全</li><li><strong>使用</strong><code>ConcurrentHashMap</code>：可以实现注册表式的单例</li></ol><p><code>ConcurrentHashMap</code><strong>实现示例</strong>：</p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> ConcurrentSingletonRegistry</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> ConcurrentHashMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> Object</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> INSTANCES </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> ConcurrentHashMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> T</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> key</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> Supplier</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> supplier</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> INSTANCES</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">computeIfAbsent</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> k </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> supplier</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><h4 id="设计一个lru缓存" tabindex="-1"><a class="header-anchor" href="#设计一个lru缓存"><span>设计一个<code>LRU</code>缓存</span></a></h4><p><strong>核心要点</strong>：</p><ol><li><strong>数据结构选择</strong>：<code>LinkedHashMap</code> + 重写<code>removeEldestEntry()</code>方法</li><li><strong>手动实现</strong>：<code>HashMap</code> + 双向链表</li><li><strong>并发实现</strong>：使用<code>ConcurrentHashMap</code> + 并发安全的链表</li><li><strong>性能考量</strong>： <ul><li><code>get</code>操作：O(1)时间复杂度</li><li><code>put</code>操作：O(1)时间复杂度</li><li>需要维护访问顺序</li></ul></li></ol><p><strong>LinkedHashMap实现示例</strong>：</p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> LRUCache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">K</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> V</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> LinkedHashMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">K</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> V</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> final</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> capacity</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> LRUCache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">int</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> capacity</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;">        super</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">capacity</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0.75f</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">capacity </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> capacity</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    protected</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> removeEldestEntry</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Entry</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">K</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> V</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> eldest</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> size</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> capacity</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><h2 id="面试回答框架" tabindex="-1"><a class="header-anchor" href="#面试回答框架"><span>面试回答框架</span></a></h2><h3 id="直接回答法" tabindex="-1"><a class="header-anchor" href="#直接回答法"><span>直接回答法</span></a></h3><p>适用于简单概念性问题，如集合类的基本功能、使用场景等。</p><p><strong>示例</strong>：<br> 问：<code>ArrayList</code>和<code>LinkedList</code>的主要区别是什么？</p><p>答：<code>ArrayList</code>和<code>LinkedList</code>的主要区别体现在三个方面：</p><ol><li><strong>底层数据结构不同</strong>：<code>ArrayList</code>基于动态数组实现，而<code>LinkedList</code>基于双向链表实现。</li><li><strong>性能特点不同</strong>：<code>ArrayList</code>的随机访问性能优异（O(1)时间复杂度），但插入删除操作较慢（特别是中间位置，O(n)时间复杂度）；<code>LinkedList</code>的随机访问性能较差（O(n)时间复杂度），但插入删除操作快速（O(1)时间复杂度）。</li><li><strong>内存占用不同</strong>：<code>ArrayList</code>内存占用相对连续紧凑，而<code>LinkedList</code>每个节点需要额外存储前后引用，内存开销更大。</li></ol><p>基于这些差异，<code>ArrayList</code>更适合读多写少、需要频繁随机访问的场景，而<code>LinkedList</code>更适合写多读少、频繁插入删除的场景。</p><h3 id="原理阐述法" tabindex="-1"><a class="header-anchor" href="#原理阐述法"><span>原理阐述法</span></a></h3><p>适用于需要深入解释工作原理的问题，如<code>HashMap</code>的实现机制、并发集合的线程安全策略等。</p><p><strong>示例</strong>：<br> 问：请详细解释<code>HashMap</code>的工作原理。</p><p>答：HashMap基于哈希表实现，通过键值对存储数据。其核心工作原理包括以下几个方面：</p><ol><li><strong>存储结构</strong>：<code>JDK 8</code>及以上版本采用数组+链表/红黑树的混合结构。当链表长度超过阈值（默认<code>8</code>）且数组长度大于等于64时，会将链表转换为红黑树以提高查询效率。</li><li><strong>哈希算法</strong>：<code>HashMap</code>使用<code>hashCode()</code>方法获取键的哈希码，然后通过扰动函数进行处理，最后对数组长度取模，确定元素在数组中的位置。</li><li><strong>冲突解决</strong>：当多个键映射到同一数组位置时，使用链地址法解决冲突，即将这些键值对以链表形式存储。</li><li><strong>扩容机制</strong>：当元素数量超过数组长度乘以负载因子（默认<code>0.75</code>）时，<code>HashMap</code>会进行扩容，将数组大小扩大为原来的两倍，并重新计算所有元素的位置。</li><li><strong>线程安全性</strong>：<code>HashMap</code>不是线程安全的，在多线程环境下可能导致链表成环、数据丢失等问题。</li></ol><h3 id="代码示例法" tabindex="-1"><a class="header-anchor" href="#代码示例法"><span>代码示例法</span></a></h3><p>适用于需要展示具体实现的问题，如<code>equals</code>/<code>hashCode</code>方法的实现、集合遍历等。</p><p><strong>示例</strong>：<br> 问：如何正确实现<code>equals</code>/<code>hashCode</code>方法？</p><p>答：正确实现<code>equals</code>/<code>hashCode</code>方法需要遵循以下原则：</p><ol><li>如果两个对象通过<code>equals</code>方法判断相等，那么它们的<code>hashCode</code>方法必须返回相同的值。</li><li>同一个对象在未被修改的情况下，多次调用<code>hashCode</code>方法应返回相同的值。</li></ol><p>以下是一个正确实现的示例：</p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> User</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> username</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> email</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> age</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> equals</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Object</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> o</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 1. 引用相等检查</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">this</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> ==</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> o</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> return</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 2. 非空和类型检查</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">o </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> ||</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> getClass</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> !=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> o</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getClass</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">())</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> return</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 3. 类型转换</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        User</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> user </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> o</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 4. 比较关键属性</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> age </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> user</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">age </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">               Objects</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">username</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> user</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">username</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">               Objects</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">email</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> user</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">email</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> hashCode</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 5. 结合所有关键属性计算哈希码</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> Objects</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">hash</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">username</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> email</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> age</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><p>这个实现确保了<code>equals</code>/<code>hashCode</code>方法的一致性，并且能够正确处理<code>null</code>值和不同类型的比较。</p><h3 id="场景分析法" tabindex="-1"><a class="header-anchor" href="#场景分析法"><span>场景分析法</span></a></h3><p>适用于需要结合实际业务场景的问题，如集合选择、性能优化等。</p><p><strong>示例</strong>：<br> 问：在一个需要频繁读取但很少修改的数据集合场景中，应该选择哪种线程安全的集合？</p><p>答：在这种读多写少的场景中，我会推荐使用<code>CopyOnWriteArrayList</code>或<code>CopyOnWriteArraySet</code>，原因如下：</p><ol><li><strong>实现原理</strong>：<code>CopyOnWriteArrayList</code>采用写时复制策略，所有写操作（如<code>add</code>、<code>set</code>、<code>remove</code>等）都会创建底层数组的副本，然后替换原数组。而读操作不需要任何同步措施，可以并发进行。</li><li><strong>性能优势</strong>： <ul><li>读操作完全无锁，性能极高，非常适合频繁读取的场景</li><li>读操作不会被写操作阻塞，写操作也不会被读操作阻塞</li><li>迭代器基于原数组快照，不会抛出<code>ConcurrentModificationException</code></li></ul></li><li><strong>适用场景</strong>： <ul><li>配置列表、权限列表等很少修改但频繁读取的数据</li><li>事件监听器列表</li><li>缓存数据（如果写操作不频繁）</li></ul></li><li><strong>注意事项</strong>： <ul><li>写操作开销较大，需要复制整个数组</li><li>不适合元素数量很大或写操作频繁的场景</li><li>内存占用较高，可能存在数据不一致（读操作可能读取到旧数据）</li></ul></li></ol><p>如果数据量很大且写操作相对频繁，可以考虑使用<code>ConcurrentHashMap</code>（如果是<code>Map</code>结构）或其他并发集合。</p><h2 id="高频面试题详解" tabindex="-1"><a class="header-anchor" href="#高频面试题详解"><span>高频面试题详解</span></a></h2><h3 id="hashmap的工作原理和扩容机制" tabindex="-1"><a class="header-anchor" href="#hashmap的工作原理和扩容机制"><span><code>HashMap</code>的工作原理和扩容机制</span></a></h3><p><strong>问题</strong>：请详细解释<code>HashMap</code>的工作原理，包括它的扩容机制和线程安全问题。</p><p><strong>回答</strong>：</p><p><code>HashMap</code>是Java中常用的键值对存储结构，其工作原理如下：</p><ol><li><strong>基本结构</strong>： <ul><li>JDK 8之前：数组+链表结构</li><li>JDK 8及以后：数组+链表/红黑树结构</li></ul></li><li><strong>存储过程</strong>： <ul><li>计算键的哈希码：<code>key.hashCode()</code></li><li>对哈希码进行扰动处理（减少碰撞）</li><li>对数组长度取模，得到数组索引</li><li>如果该位置为空，直接放入；如果不为空，通过<code>equals()</code>判断是否相同</li><li>相同则覆盖值，不同则添加到链表末尾或树节点</li></ul></li><li><strong>扩容机制</strong>： <ul><li>触发条件：元素数量 &gt; 数组长度 * 负载因子(默认<code>0.75</code>)</li><li>扩容过程： <ul><li>创建一个新的、更大的数组（原容量的<code>2</code>倍）</li><li>重新计算每个元素的位置并迁移</li><li>JDK 8优化：使用高低位标记，无需重新计算哈希值</li></ul></li><li>红黑树转换：当链表长度&gt;=<code>8</code>且数组长度&gt;=<code>64</code>时，链表转换为红黑树</li></ul></li><li><strong>线程安全问题</strong>： <ul><li>JDK 7：多线程并发扩容可能导致链表成环，引起死循环</li><li>JDK 8：解决了链表成环问题，但仍存在数据覆盖等线程安全问题</li><li>线程安全替代：<code>ConcurrentHashMap</code>、<code>Collections.synchronizedMap</code>等</li></ul></li></ol><h3 id="arraylist和linkedlist的区别" tabindex="-1"><a class="header-anchor" href="#arraylist和linkedlist的区别"><span><code>ArrayList</code>和<code>LinkedList</code>的区别</span></a></h3><p><strong>问题</strong>：<code>ArrayList</code>和<code>LinkedList</code>有什么区别？在什么场景下应该选择使用它们？</p><p><strong>回答</strong>：</p><p><code>ArrayList</code>和<code>LinkedList</code>是<code>List</code>接口的两个主要实现类，它们的区别主要体现在以下几个方面：</p><ol><li><strong>底层数据结构</strong>： <ul><li><code>ArrayList</code>：基于动态数组实现，元素存储在连续的内存空间</li><li><code>LinkedList</code>：基于双向链表实现，每个节点包含前驱引用、数据和后继引用</li></ul></li><li><strong>性能特点</strong>： <ul><li><code>ArrayList</code>： <ul><li>随机访问效率高（O(1)时间复杂度）</li><li>插入删除效率低，尤其是中间位置（O(n)时间复杂度）</li><li>查找效率依赖于查找算法</li></ul></li><li><code>LinkedList</code>： <ul><li>随机访问效率低（O(n)时间复杂度）</li><li>插入删除效率高，尤其是首尾位置（O(1)时间复杂度）</li><li>双向遍历支持更灵活，可同时从前往后和从后往前遍历</li></ul></li></ul></li><li><strong>内存开销</strong>： <ul><li><code>ArrayList</code>：内存占用较紧凑，但可能有扩容预留空间，导致内存浪费</li><li><code>LinkedList</code>：每个元素需要额外存储前后引用，内存开销较大</li></ul></li><li><strong>扩容机制</strong>： <ul><li><code>ArrayList</code>：当容量不足时，扩容为原来的1.5倍，可能会导致内存浪费</li><li><code>LinkedList</code>：不需要扩容，动态分配节点</li></ul></li><li><strong>接口实现</strong>： <ul><li><code>LinkedList</code>额外实现了<code>Deque</code>接口，可作为队列、栈使用</li><li><code>ArrayList</code>没有实现<code>Deque</code>接口，不能直接作为队列或栈使用</li></ul></li></ol><p>使用场景选择：</p><ul><li>当需要频繁随机访问元素时，选择<code>ArrayList</code></li><li>当需要频繁在任意位置插入删除元素时，选择<code>LinkedList</code></li><li>当元素数量大且需要高效遍历（特别是顺序遍历）时，<code>ArrayList</code>更优</li><li>当需要使用队列或栈功能时，<code>LinkedList</code>更方便</li><li>对于大多数日常应用，尤其是读多写少的场景，<code>ArrayList</code>通常是更好的选择</li></ul><h3 id="concurrenthashmap的线程安全实现" tabindex="-1"><a class="header-anchor" href="#concurrenthashmap的线程安全实现"><span><code>ConcurrentHashMap</code>的线程安全实现</span></a></h3><p><strong>问题</strong>：<code>ConcurrentHashMap</code>是如何实现线程安全的？它与<code>Hashtable</code>和<code>Collections.synchronizedMap</code>有什么区别？</p><p><strong>回答</strong>：</p><p><code>ConcurrentHashMap</code>通过细粒度锁和无锁算法实现高效的线程安全，其实现方式在<code>JDK 7</code>和<code>JDK 8</code>中有显著差异：</p><p><strong>JDK 7实现</strong>：</p><ul><li>采用分段锁（<code>Segment</code>）机制，将整个哈希表分为多个<code>Segment</code></li><li>每个<code>Segment</code>继承自<code>ReentrantLock</code>，内部维护一个小的哈希表</li><li>不同<code>Segment</code>的操作互不影响，可以并发进行</li><li>读写锁分离，允许多个线程同时读同一个<code>Segment</code></li></ul><p><strong>JDK 8实现</strong>：</p><ul><li>放弃了分段锁，采用<code>Node</code>数组+链表/红黑树结构</li><li>使用<code>CAS操作</code>和<code>synchronized关键字</code>保证线程安全</li><li>对链表头节点加锁，而不是整个数组或<code>Segment</code></li><li>使用<code>volatile</code>关键字确保节点的可见性</li><li>支持更高的并发度，理论上可以有数组长度个线程同时写</li></ul><p><strong>与</strong><code>Hashtable</code><strong>的区别</strong>：</p><ol><li>锁粒度：<code>Hashtable</code>使用全局锁（<code>synchronized</code>方法），<code>ConcurrentHashMap</code>使用细粒度锁</li><li>并发性能：<code>ConcurrentHashMap</code>允许多线程并发访问，<code>Hashtable</code>只能串行访问</li><li>null值：<code>ConcurrentHashMap</code>不允许key或value为null，<code>Hashtable</code>也不允许</li><li>迭代器：<code>ConcurrentHashMap</code>的迭代器弱一致性，<code>Hashtable</code>的迭代器快速失败</li></ol><p><strong>与</strong><code>Collections.synchronizedMap</code><strong>的区别</strong>：</p><ol><li>锁粒度：<code>Collections.synchronizedMap</code>使用单一锁包装整个<code>Map</code>，<code>ConcurrentHashMap</code>使用细粒度锁</li><li>并发性能：<code>ConcurrentHashMap</code>并发性能更高</li><li>迭代器：<code>Collections.synchronizedMap</code>的迭代器快速失败，<code>ConcurrentHashMap</code>的迭代器弱一致性</li><li>额外操作：<code>ConcurrentHashMap</code>提供了更多原子操作，如<code>putIfAbsent</code>、<code>replace</code>等</li></ol><p>总结：<code>ConcurrentHashMap</code>通过优化锁机制，在保证线程安全的同时提供了接近<code>HashMap</code>的性能，是高并发场景下的首选。</p><h3 id="fail-fast和fail-safe机制的区别" tabindex="-1"><a class="header-anchor" href="#fail-fast和fail-safe机制的区别"><span><code>fail-fast</code>和<code>fail-safe</code>机制的区别</span></a></h3><p><strong>问题</strong>：什么是<code>fail-fast</code>和<code>fail-safe</code>机制？它们有什么区别？哪些集合实现了这些机制？</p><p><strong>回答</strong>：</p><p><code>fail-fast</code>和<code>fail-safe</code>是两种不同的并发访问策略，用于处理集合在迭代过程中被修改的情况。</p><p><strong>fail-fast机制</strong>：</p><ul><li><strong>原理</strong>：在迭代过程中，通过<code>modCount</code>（修改计数器）检测集合是否被修改</li><li><strong>行为</strong>：如果在迭代过程中集合结构被修改（如添加、删除元素），会抛出<code>ConcurrentModificationException</code>异常</li><li><strong>实现集合</strong>：<code>ArrayList</code>、<code>HashMap</code>、<code>HashSet</code>等普通集合类</li><li><strong>优点</strong>：快速失败，能够及时发现并发修改问题</li><li><strong>缺点</strong>：在单线程环境中，如果在迭代器外部修改集合也会抛出异常</li><li><strong>注意事项</strong>：<code>Iterator</code>的<code>remove()</code>方法修改不会触发异常，因为它会同时更新<code>expectedModCount</code>和<code>modCount</code></li></ul><p><strong>fail-safe机制</strong>：</p><ul><li><strong>原理</strong>：迭代过程中基于集合的快照（副本）进行操作，不直接访问原集合</li><li><strong>行为</strong>：即使集合在迭代过程中被修改，也不会抛出异常，但可能读取到的是旧数据</li><li><strong>实现集合</strong>：<code>CopyOnWriteArrayList</code>、<code>ConcurrentHashMap</code>等并发集合类</li><li><strong>优点</strong>：迭代过程中可以安全地修改集合，不会抛出异常</li><li><strong>缺点</strong>：可能读取到过期数据，内存开销较大</li></ul><p><strong>主要区别</strong>：</p><ol><li><strong>异常抛出</strong>：fail-fast会抛出<code>ConcurrentModificationException</code>异常，fail-safe不会</li><li><strong>数据一致性</strong>：fail-fast保证数据一致性（不允许并发修改），fail-safe可能读取到旧数据</li><li><strong>内存开销</strong>：fail-fast内存开销小，fail-safe内存开销大（需要复制集合）</li><li><strong>适用场景</strong>：fail-fast适用于单线程环境，fail-safe适用于并发环境</li></ol><p><strong>代码示例</strong>：</p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">// fail-fast示例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> list </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> ArrayList</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;&gt;(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">Arrays</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">asList</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">A</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">B</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">C</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Iterator</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> iterator </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> list</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">iterator</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">while</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">iterator</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">hasNext</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">())</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">    String</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> element </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> iterator</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 以下操作会抛出ConcurrentModificationException</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    list</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">element</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 应该使用迭代器的remove方法：iterator.remove();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">// fail-safe示例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> safeList </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> CopyOnWriteArrayList</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;&gt;(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">Arrays</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">asList</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">A</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">B</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">C</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> element </span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> safeList</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 可以安全地修改集合，不会抛出异常</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    safeList</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">D</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><h2 id="面试模拟题" tabindex="-1"><a class="header-anchor" href="#面试模拟题"><span>面试模拟题</span></a></h2><h3 id="设计一个lru缓存-1" tabindex="-1"><a class="header-anchor" href="#设计一个lru缓存-1"><span>设计一个LRU缓存</span></a></h3><p><strong>问题</strong>：请设计并实现一个<code>LRU</code>（最近最少使用）缓存机制，要求<code>get</code>和<code>put</code>操作的时间复杂度都是<code>O(1)</code>。</p><p><strong>分析</strong>：</p><p>LRU缓存需要支持快速查找和维护访问顺序，可以结合<code>HashMap</code>和双向链表实现：</p><ul><li><code>HashMap</code>用于<code>O(1)</code>时间复杂度的查找</li><li>双向链表用于维护访问顺序，最近使用的放在链表头部</li></ul><p><strong>解答</strong>：</p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> LRUCache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">K</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> V</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 定义双向链表节点</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> Node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        K</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> key</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        V</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        Node</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> prev</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        Node</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> next</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">        public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> Node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">K</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> key</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> V</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">key </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> key</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">value </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> final</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> capacity</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;"> // 缓存容量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">K</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> Node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> cache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;"> // 存储键到节点的映射</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> Node</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> head</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;"> // 虚拟头节点</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> Node</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> tail</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;"> // 虚拟尾节点</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> LRUCache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">int</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> capacity</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">capacity </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> capacity</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">cache </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> HashMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;&gt;(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">capacity</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 初始化虚拟头尾节点</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">head </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> Node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">tail </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> Node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        head</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">next </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> tail</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        tail</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">prev </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> head</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 获取缓存中的值</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> V</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> get</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">K</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> key</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        Node</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> node </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> cache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">node </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;"> // 键不存在</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 将访问的节点移到链表头部（标记为最近使用）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">        moveToHead</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 添加缓存项</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> put</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">K</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> key</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> V</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        Node</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> node </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> cache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">node </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 创建新节点</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            Node</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> newNode </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> Node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            cache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> newNode</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">            addToHead</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">newNode</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;"> // 添加到链表头部</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 检查是否超出容量</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">cache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> capacity</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">                // 移除链表尾部节点（最久未使用）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">                Node</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> tail </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> removeTail</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                cache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">tail</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> else</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">            // 更新现有节点的值</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">value </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">            moveToHead</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;"> // 移到链表头部</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 将节点添加到链表头部</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> addToHead</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Node</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">prev </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> head</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">next </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> head</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        head</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">prev </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        head</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">next </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 从链表中移除节点</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> removeNode</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Node</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">prev</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">next </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">prev </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">prev</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 将节点移到链表头部</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> moveToHead</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Node</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">        removeNode</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">        addToHead</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">node</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 移除并返回链表尾部节点</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> Node</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> removeTail</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        Node</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> res </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> tail</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">prev</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">        removeNode</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> res</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 测试方法</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> toString</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        StringBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> sb </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> StringBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        sb</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">LRUCache[capacity=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">capacity</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">, size=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">cache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">, items=[</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        Node</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> current </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> head</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        while</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">current </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">!=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> tail</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            sb</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">current</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">current</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            current </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> current</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">current </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">!=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> tail</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                sb</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        sb</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">]]</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> sb</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 主方法演示</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> args</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        LRUCache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> cache </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> LRUCache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;&gt;(</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        cache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">A</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        cache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">B</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        cache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">C</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">初始缓存: </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> cache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;"> // 应该包含 A=1, B=2, C=3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        cache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">A</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;"> // 访问A，将其移到最近使用</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">访问A后: </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> cache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;"> // 顺序应该变为 B=2, C=3, A=1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        cache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">D</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;"> // 添加D，应该淘汰B</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">添加D后: </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> cache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;"> // 应该包含 C=3, A=1, D=4</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        cache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">B</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;"> // 尝试访问B，应该返回null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">访问B后: </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> cache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        cache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">C</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 30</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;"> // 更新C的值</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">更新C后: </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> cache</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;"> // C的值应该更新为30，并且移到最近使用</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><p>这个实现满足了要求的O(1)时间复杂度，同时能够有效地管理缓存大小和访问顺序。</p><h3 id="统计字符串中字符出现频率" tabindex="-1"><a class="header-anchor" href="#统计字符串中字符出现频率"><span>统计字符串中字符出现频率</span></a></h3><p><strong>问题</strong>：给定一个字符串，统计其中每个字符出现的频率，并按照频率从高到低排序输出。</p><p><strong>分析</strong>：</p><p>这个问题可以通过以下步骤解决：</p><ol><li>使用<code>HashMap</code>统计每个字符的出现次数</li><li>将字符和频率的映射转换为列表或集合</li><li>按照频率从高到低排序</li><li>输出排序结果</li></ol><p><strong>解答</strong>：</p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">util</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">util</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">stream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> CharacterFrequencyCounter</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 方法1：使用HashMap和Collections.sort</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Character</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> countFrequency1</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> input</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">input </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> input</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">())</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> Collections</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">emptyMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 统计字符频率</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Character</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> frequencyMap </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> HashMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">char</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> c </span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> input</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">toCharArray</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">())</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            frequencyMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">c</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> frequencyMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getOrDefault</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">c</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 将Map转换为List进行排序</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        List</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Entry</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Character</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> entryList </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> ArrayList</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;&gt;(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">frequencyMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">entrySet</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        entryList</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">sort</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">Entry</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">Character</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> Integer</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">comparingByValue</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">reversed</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 创建有序的LinkedHashMap来保持排序结果</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Character</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> sortedMap </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> LinkedHashMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Entry</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Character</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> entry </span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> entryList</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            sortedMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">entry</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getKey</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(),</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> entry</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> sortedMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 方法2：使用Stream API</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Character</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> countFrequency2</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> input</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">input </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> input</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">())</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> Collections</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">emptyMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> input</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">chars</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">mapToObj</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">c </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">char</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> c</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">collect</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">Collectors</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">groupingBy</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">c </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> c</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> Collectors</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">summingInt</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">c </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">-&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">entrySet</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">stream</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">sorted</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">Entry</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">Character</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> Integer</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">comparingByValue</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">reversed</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">collect</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">Collectors</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">toMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                        Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">Entry</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">getKey</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                        Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">Entry</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">                        (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">oldValue</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> newValue</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> -&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> oldValue</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                        LinkedHashMap</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">::new</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">                ));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 方法3：处理Unicode字符，使用codePoint</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> countFrequencyUnicode</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> input</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">input </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> input</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">())</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> Collections</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">emptyMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> frequencyMap </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> HashMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 使用codePoint方法处理Unicode字符</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        while</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">i </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> input</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">())</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">            int</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> codePoint </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> input</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">codePointAt</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">i</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">            String</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> character </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">Character</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">toChars</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">codePoint</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            frequencyMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">character</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> frequencyMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getOrDefault</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">character</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            i </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> Character</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">charCount</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">codePoint</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 排序并创建有序Map</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        List</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Entry</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> entryList </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> ArrayList</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;&gt;(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">frequencyMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">entrySet</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        entryList</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">sort</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">Entry</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> Integer</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">comparingByValue</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">reversed</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> sortedMap </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> LinkedHashMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Entry</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> entry </span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> entryList</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            sortedMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">entry</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getKey</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(),</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> entry</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> sortedMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 打印结果的辅助方法</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> printFrequencyMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> frequencyMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">字符频率统计结果（按频率降序）：</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        frequencyMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">((</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> -&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">printf</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">&#39;%s&#39;: %d</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> key</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> args</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 测试基本ASCII字符</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        String</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> testString </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">hello world! programming is fun. java collection framework.</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">=== 测试基本ASCII字符 ===</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">输入字符串: </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> testString</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">方法1结果：</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Character</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> result1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> countFrequency1</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">testString</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">        printFrequencyMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">result1</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">方法2结果：</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">Character</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> result2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> countFrequency2</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">testString</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">        printFrequencyMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">result2</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 测试Unicode字符</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        String</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> unicodeString </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">你好，世界！Java集合框架很有趣。😊😂👍</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">=== 测试Unicode字符 ===</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">输入字符串: </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> unicodeString</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        Map</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> unicodeResult </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> countFrequencyUnicode</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">unicodeString</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">        printFrequencyMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">unicodeResult</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><h3 id="实现线程安全的单例模式" tabindex="-1"><a class="header-anchor" href="#实现线程安全的单例模式"><span>实现线程安全的单例模式</span></a></h3><p><strong>问题</strong>：请实现几种线程安全的单例模式，并分析它们的优缺点。</p><p><strong>分析</strong>：</p><p>单例模式确保一个类只有一个实例，并提供全局访问点。线程安全的单例模式有多种实现方式，各有优缺点。</p><p><strong>解答</strong>：</p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#24292e;--shiki-dark:#babed8;--shiki-light-bg:#fff;--shiki-dark-bg:#0F111A;"><pre class="shiki shiki-themes github-light material-theme-ocean vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">util</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">concurrent</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">ConcurrentHashMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> java</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">util</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">Supplier</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">// 1. 饿汉式（线程安全）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> EagerSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 类加载时就创建实例</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> EagerSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> INSTANCE </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> EagerSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 私有构造函数防止外部实例化</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> EagerSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 防止通过反射创建多个实例</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">INSTANCE </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">            throw</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> RuntimeException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">请使用getInstance()方法获取实例</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> EagerSingleton</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> INSTANCE</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">// 2. 懒汉式（使用synchronized实现线程安全）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> LazySingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> LazySingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> instance</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> LazySingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 防止通过反射创建多个实例</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">            throw</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> RuntimeException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">请使用getInstance()方法获取实例</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 方法同步，线程安全但性能较差</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> synchronized</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> LazySingleton</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">            instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> LazySingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> instance</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">// 3. 双重检查锁定（Double-Checked Locking）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> DCLSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // volatile关键字防止指令重排序</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> volatile</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> DCLSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> instance</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> DCLSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 防止通过反射创建多个实例</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">            throw</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> RuntimeException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">请使用getInstance()方法获取实例</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> DCLSingleton</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 第一次检查，避免不必要的同步</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">            synchronized</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">DCLSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">class</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">                // 第二次检查，确保只创建一个实例</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">                    instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> DCLSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> instance</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">// 4. 静态内部类实现（Initialization-on-demand holder idiom）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> HolderSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 静态内部类</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> SingletonHolder</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">        private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> HolderSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> INSTANCE </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> HolderSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> HolderSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 防止通过反射创建多个实例</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">SingletonHolder</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">INSTANCE </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">            throw</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> RuntimeException</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">请使用getInstance()方法获取实例</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> HolderSingleton</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> SingletonHolder</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">INSTANCE</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">// 5. 枚举实现（Enum Singleton）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">enum</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> EnumSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#BABED8;">    INSTANCE</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 枚举构造函数默认是私有的</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">    EnumSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 初始化代码</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 添加业务方法</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> businessMethod</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">枚举单例的业务方法</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">// 6. 使用ConcurrentHashMap实现注册表式单例</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> ConcurrentSingletonRegistry</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> ConcurrentHashMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> Object</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> INSTANCES </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> ConcurrentHashMap</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 私有构造函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> ConcurrentSingletonRegistry</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 获取指定类型的单例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">SuppressWarnings</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">unchecked</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> T</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> key</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;"> Supplier</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> creator</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> INSTANCES</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">computeIfAbsent</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> k </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> creator</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">// 测试类</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> SingletonTest</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[]</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#BABED8;--shiki-dark-font-style:italic;"> args</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 测试饿汉式</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        EagerSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> eager1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> EagerSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        EagerSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> eager2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> EagerSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">饿汉式单例相同: </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">eager1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> eager2</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 测试懒汉式</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        LazySingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> lazy1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> LazySingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        LazySingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> lazy2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> LazySingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">懒汉式单例相同: </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">lazy1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> lazy2</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 测试双重检查锁定</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        DCLSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> dcl1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> DCLSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        DCLSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> dcl2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> DCLSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">DCL单例相同: </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">dcl1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> dcl2</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 测试静态内部类</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        HolderSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> holder1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> HolderSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        HolderSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> holder2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> HolderSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">静态内部类单例相同: </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">holder1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> holder2</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 测试枚举单例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        EnumSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> enum1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> EnumSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">INSTANCE</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        EnumSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> enum2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> EnumSingleton</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">INSTANCE</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">枚举单例相同: </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">enum1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> enum2</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        enum1</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">businessMethod</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 测试ConcurrentHashMap注册表</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        TestClass</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> test1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> ConcurrentSingletonRegistry</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">test</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> TestClass</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">::new</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#C792EA;">        TestClass</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> test2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> ConcurrentSingletonRegistry</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">test</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> TestClass</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">::new</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">ConcurrentHashMap注册表单例相同: </span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">test1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;"> test2</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#BABED8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">    // 测试用的类</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> TestClass</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">        // 类内容</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">/* 各实现方式的优缺点分析：</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">1. 饿汉式：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">   - 优点：实现简单，绝对线程安全</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">   - 缺点：类加载时就创建实例，可能造成资源浪费</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">2. 懒汉式（synchronized方法）：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">   - 优点：实现简单，延迟加载</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">   - 缺点：性能较差，每次获取实例都需要同步</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">3. 双重检查锁定：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">   - 优点：延迟加载，性能较好，只有第一次创建实例时需要同步</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">   - 缺点：实现较复杂，需要使用volatile关键字防止指令重排序</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">4. 静态内部类：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">   - 优点：延迟加载，线程安全，性能好</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">   - 缺点：实现稍复杂</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">5. 枚举实现：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">   - 优点：实现最简单，绝对线程安全，防止序列化和反射攻击</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">   - 缺点：不能延迟加载，类加载时就初始化</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">6. ConcurrentHashMap注册表：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">   - 优点：支持多类型单例注册，线程安全，延迟加载</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">   - 缺点：实现较复杂，需要额外的键来标识不同类型的单例</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#464B5D;--shiki-dark-font-style:italic;">*/</span></span></code></pre></div><h2 id="面试加分要点" tabindex="-1"><a class="header-anchor" href="#面试加分要点"><span>面试加分要点</span></a></h2><h3 id="版本差异" tabindex="-1"><a class="header-anchor" href="#版本差异"><span>版本差异</span></a></h3><ol><li><strong>JDK 7 vs JDK 8的</strong><code>HashMap</code><strong>区别</strong>： <ul><li>存储结构：7用数组+链表，8用数组+链表/红黑树</li><li>链表插入：7用头插法，8用尾插法</li><li>扩容机制：8优化了哈希计算，避免链表成环问题</li><li>性能：8在哈希冲突严重时性能更好（O(log n) vs O(n)）</li></ul></li><li><strong>JDK 7 vs JDK 8的</strong><code>ConcurrentHashMap</code><strong>区别</strong>： <ul><li>锁机制：7用分段锁（<code>Segment</code>），8用<code>CAS</code>+<code>synchronized</code>优化</li><li>并发度：7受<code>Segment</code>数量限制，<code>8</code>理论上等于数组长度</li><li>性能：<code>8</code>在高并发场景下性能更好（O(log n) vs O(n)）</li></ul></li></ol><h3 id="性能分析" tabindex="-1"><a class="header-anchor" href="#性能分析"><span>性能分析</span></a></h3><ol><li><strong>时间复杂度分析</strong>： <ul><li><code>ArrayList</code>随机访问：<code>O(1)</code></li><li><code>LinkedList</code>随机访问：<code>O(n)</code></li><li><code>HashMap</code>查找/添加/删除：平均<code>O(1)</code>，最坏<code>O(log n)</code>（红黑树）</li><li><code>TreeMap</code>查找/添加/删除：<code>O(log n)</code></li><li><code>HashSet</code>添加/删除/查找：平均<code>O(1)</code>，最坏<code>O(log n)</code></li></ul></li><li><strong>空间复杂度分析</strong>： <ul><li><code>ArrayList</code>：<code>O(n)</code>，但可能有额外的预留空间</li><li><code>LinkedList</code>：<code>O(n)</code>，额外存储前后引用</li><li><code>HashMap</code>：<code>O(n)</code>，负载因子影响空间利用率</li><li><code>ConcurrentHashMap</code>：<code>O(n)</code>，额外的并发控制开销</li><li><code>CopyOnWriteArrayList</code>：写操作时<code>O(n)</code>，需要复制整个数组</li></ul></li></ol><h3 id="源码理解" tabindex="-1"><a class="header-anchor" href="#源码理解"><span>源码理解</span></a></h3><ol><li><code>HashMap</code><strong>的</strong><code>resize()</code><strong>方法</strong>：理解扩容过程和重哈希算法</li><li><code>ConcurrentHashMap</code><strong>的</strong><code>putVal()</code><strong>方法</strong>：理解细粒度锁实现</li><li><code>ArrayList</code><strong>的扩容机制</strong>：理解<code>grow()</code>方法和<code>Arrays.copyOf()</code>的使用</li><li><code>LinkedList</code><strong>的链表操作</strong>：理解节点添加、删除的实现</li></ol><h3 id="实战经验" tabindex="-1"><a class="header-anchor" href="#实战经验"><span>实战经验</span></a></h3><ol><li><strong>集合初始化容量</strong>：根据预期数据量设置合适的初始容量</li><li><strong>线程安全选择</strong>：根据并发场景选择合适的线程安全集合</li><li><strong>避免性能陷阱</strong>： <ul><li>避免在循环中使用<code>ArrayList</code>的<code>remove()</code>方法，因为它会导致元素移动</li><li>避免创建大量临时集合对象，及时清理不再使用的引用</li><li>正确使用迭代器，避免在遍历中修改集合</li></ul></li><li><strong>内存优化</strong>： <ul><li>使用原始类型集合（如<code>IntArrayList</code>）减少装箱开销</li><li>对于大集合，考虑使用并行流处理</li><li>及时清理不再使用的集合引用</li></ul></li></ol><h3 id="扩展思考" tabindex="-1"><a class="header-anchor" href="#扩展思考"><span>扩展思考</span></a></h3><ol><li><strong>自定义集合实现</strong>：如何实现一个自定义的高性能集合</li><li><strong>集合框架设计</strong>：理解Java集合框架的设计理念和接口层次</li><li><strong>替代方案比较</strong>：与其他语言集合框架的比较（如<code>C++ STL</code>、Python集合）</li><li><strong>新特性关注</strong>：<code>Java 9+</code>集合工厂方法、<code>Java 16+</code>向量API等新特性</li></ol><h2 id="面试准备清单" tabindex="-1"><a class="header-anchor" href="#面试准备清单"><span>面试准备清单</span></a></h2><h3 id="必背知识点" tabindex="-1"><a class="header-anchor" href="#必背知识点"><span>必背知识点</span></a></h3><ol><li><strong>核心接口层次结构</strong>：<code>Collection</code>、<code>Map</code>及其子接口</li><li><strong>主要实现类特点</strong>：<code>ArrayList</code>、<code>LinkedList</code>、<code>HashMap</code>、<code>TreeMap</code>等</li><li><strong>并发集合特性</strong>：<code>ConcurrentHashMap</code>、<code>CopyOnWriteArrayList</code>、<code>BlockingQueue</code>等</li><li><code>equals/hashCode</code><strong>契约</strong>：正确实现的原则和示例</li><li><strong>常见设计模式</strong>：单例模式、工厂模式、装饰器模式（集合框架中的应用）</li></ol><h3 id="实战技能" tabindex="-1"><a class="header-anchor" href="#实战技能"><span>实战技能</span></a></h3><ol><li><strong>集合性能分析</strong>：能够分析不同集合操作的时间和空间复杂度</li><li><strong>线程安全问题排查</strong>：能够识别和解决集合在并发环境中的问题</li><li><strong>代码优化能力</strong>：能够优化集合相关代码的性能</li><li><strong>设计能力</strong>：能够根据需求设计合适的数据结构和集合选择方案</li></ol><h3 id="思维训练" tabindex="-1"><a class="header-anchor" href="#思维训练"><span>思维训练</span></a></h3><ol><li><strong>类比思维</strong>：将集合类与现实世界的容器进行类比</li><li><strong>对比分析</strong>：能够对比不同集合类的优缺点和适用场景</li><li><strong>原理解析</strong>：能够深入解释集合类的底层实现原理</li><li><strong>场景应用</strong>：能够将集合知识应用到实际业务场景中</li></ol><h2 id="小结" tabindex="-1"><a class="header-anchor" href="#小结"><span>小结</span></a></h2><p>Java集合框架是Java开发中最常用的API之一，也是面试中的高频知识点。本章系统总结了Java集合框架的核心知识点、面试高频问题及回答技巧，希望能够帮助你在面试中取得好成绩。</p><p>面试中，不仅要掌握集合类的基本用法，更要深入理解其底层实现原理、性能特性和适用场景。同时，结合实际项目经验，能够灵活运用集合框架解决实际问题，也是面试官非常看重的能力。</p><p>最后，建议通过大量的编码练习和源码阅读来加深对Java集合框架的理解，这样在面试中才能做到游刃有余。</p></div><!----><!----><!----></div></main><footer class="vp-doc-footer" data-v-0d7da0a5 data-v-83bdd30b><!--[--><!--]--><!----><div class="contributors" aria-label="Contributors" data-v-83bdd30b><span class="contributors-label" data-v-83bdd30b>贡献者: </span><span class="contributors-info" data-v-83bdd30b><!--[--><!--[--><span class="contributor" data-v-83bdd30b>weew12</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-83bdd30b><div class="pager" data-v-83bdd30b><a class="vp-link link pager-link prev" href="/language/java_collection/dbwmlw7k/" data-v-83bdd30b><!--[--><span class="desc" data-v-83bdd30b>上一页</span><span class="title" data-v-83bdd30b>08_Java并发集合框架设计原理与实现机制</span><!--]--><!----></a></div><div class="pager" data-v-83bdd30b><a class="vp-link link pager-link next" href="/language/java_collection/worogkiq/" data-v-83bdd30b><!--[--><span class="desc" data-v-83bdd30b>下一页</span><span class="title" data-v-83bdd30b>10_Java 8+函数式特性与集合框架集成原理</span><!--]--><!----></a></div></nav></footer><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;" data-v-0d7da0a5><div style="display: flex;align-items: center;justify-content: center;height: 96px"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);--icon-size: 48px;display: inline-block;width: var(--icon-size);height: var(--icon-size);background-color: currentcolor;-webkit-mask-image: var(--loading-icon);mask-image: var(--loading-icon)"></span></div></div><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-27c095d7 data-v-7a5f51ab><span class="percent" data-allow-mismatch data-v-7a5f51ab>0%</span><span class="show icon vpi-back-to-top" data-v-7a5f51ab></span><svg aria-hidden="true" data-v-7a5f51ab><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-7a5f51ab></circle></svg></button><footer class="vp-footer has-sidebar" vp-footer data-v-27c095d7 data-v-fe15003d><!--[--><div class="container" data-v-fe15003d><!----><p class="copyright" data-v-fe15003d>Copyright © 2026 weew12</p></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/assets/app-BO2U5m27.js" defer></script></body></html>